<!-- TOC -->

- [æ•°æ®ç»“æ„](#æ•°æ®ç»“æ„)
  - [HashMap](#hashmap)
  - [ConcurrentHashMap](#concurrenthashmap)
  - [Append-only B+ Tree](#append-only-b-tree)
  - [LSM tree](#lsm-tree)
  - [çº¢é»‘æ ‘ä¸ AVL æ ‘](#çº¢é»‘æ ‘ä¸-avl-æ ‘)
  - [LinkedBlockingQueue ä¸ ArrayBlockingQueue](#linkedblockingqueue-ä¸-arrayblockingqueue)
- [Java](#java)
  - [Java åŸºç¡€](#java-åŸºç¡€)
    - [Reference](#reference)
    - [å‡½æ•°å¼ç¼–ç¨‹](#å‡½æ•°å¼ç¼–ç¨‹)
    - [Java å®‰å…¨](#java-å®‰å…¨)
  - [Java å¹¶å‘](#java-å¹¶å‘)
    - [volatile](#volatile)
    - [AQS](#aqs)
    - [åå‘é”âœ¨](#åå‘é”)
  - [Java IO](#java-io)
- [JVM](#jvm)
  - [åƒåœ¾æ”¶é›†](#åƒåœ¾æ”¶é›†)
    - [CMS](#cms)
    - [G1](#g1)
    - [ZGC](#zgc)
  - [å…ƒç©ºé—´](#å…ƒç©ºé—´)
  - [å­—èŠ‚ç æ“ä½œ](#å­—èŠ‚ç æ“ä½œ)
  - [JVM è°ƒä¼˜](#jvm-è°ƒä¼˜)
- [åˆ†å¸ƒå¼](#åˆ†å¸ƒå¼)
  - [åˆ†å¸ƒå¼ç®—æ³•](#åˆ†å¸ƒå¼ç®—æ³•)
    - [Paxos](#paxos)
    - [Raft](#raft)
    - [BFT](#bft)
  - [åˆ†å¸ƒå¼é”](#åˆ†å¸ƒå¼é”)
    - [Redis åˆ†å¸ƒå¼é”](#redis-åˆ†å¸ƒå¼é”)
  - [åˆ†å¸ƒå¼äº‹åŠ¡](#åˆ†å¸ƒå¼äº‹åŠ¡)
- [MySQL](#mysql)
  - [æŸ¥è¯¢è¯­å¥](#æŸ¥è¯¢è¯­å¥)
  - [åŸºæœ¬åŸç†](#åŸºæœ¬åŸç†)
  - [innodb å­˜å‚¨å¼•æ“âœ¨](#innodb-å­˜å‚¨å¼•æ“)
- [ç¼“å­˜](#ç¼“å­˜)
- [å¼€æºæ¡†æ¶](#å¼€æºæ¡†æ¶)
  - [Spring](#spring)
    - [æºç è§£æâœ¨](#æºç è§£æ)
  - [Dubbo](#dubbo)
  - [Kafka](#kafka)
    - [åº•å±‚åŸç†âœ¨](#åº•å±‚åŸç†)
  - [Zookeeper](#zookeeper)
    - [zab åŸç†è§£æ](#zab-åŸç†è§£æ)
  - [Tomcat](#tomcat)
  - [Netty](#netty)
    - [å†…å­˜ç®¡ç†](#å†…å­˜ç®¡ç†)
    - [åº•å±‚åŸç†](#åº•å±‚åŸç†-1)
- [Linux](#linux)
- [è®¡ç®—æœºç½‘ç»œ](#è®¡ç®—æœºç½‘ç»œ)
  - [HTTP](#http)
  - [SOCKET](#socket)
  - [TCP](#tcp)
  - [NIO](#nio)
- [é€šä¿¡åè®®](#é€šä¿¡åè®®)
- [è§£å†³æ–¹æ¡ˆ](#è§£å†³æ–¹æ¡ˆ)
  - [è´Ÿè½½å‡è¡¡](#è´Ÿè½½å‡è¡¡)
  - [SSO](#sso)
  - [ç‚¹èµè¯„è®ºè®¡æ•°è®¾è®¡](#ç‚¹èµè¯„è®ºè®¡æ•°è®¾è®¡)
- [ç¼–ç¨‹ç´ å…»](#ç¼–ç¨‹ç´ å…»)
  - [è®¾è®¡æ¨¡å¼](#è®¾è®¡æ¨¡å¼)
  - [å¸¸ç”¨æŒ‡ä»¤](#å¸¸ç”¨æŒ‡ä»¤)
    - [ç½‘ç»œç›¸å…³](#ç½‘ç»œç›¸å…³)
- [å·¥å…·åŒ…](#å·¥å…·åŒ…)

<!-- /TOC -->

# æ•°æ®ç»“æ„

## HashMap

- [HashMap æºç åˆ†æ](https://segmentfault.com/a/1190000012926722)

- [JDK1.7 HashMap infinite loop](https://my.oschina.net/u/1024107/blog/758588)

- [HashMap åˆ é™¤èŠ‚ç‚¹æ—¶çš„æ ‘é€€åŒ–ä¸ºé“¾è¡¨](https://www.cnblogs.com/lifacheng/p/11032482.html)

## ConcurrentHashMap

- [ConcurrentHashMap æºç åˆ†æ](https://blog.csdn.net/u011392897/article/details/60479937)

- [ConcurrentHashMap æ‰©å®¹å›¾æ–‡è¯¦è§£](https://blog.csdn.net/ZOKEKAI/article/details/90051567)

    æ­£åœ¨è¿ç§»çš„hashæ¡¶é‡åˆ° get æ“ä½œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

    ç­”ï¼šåœ¨æ‰©å®¹è¿‡ç¨‹æœŸé—´å½¢æˆçš„ hn å’Œ ln é“¾æ˜¯ä½¿ç”¨çš„ç±»ä¼¼äºå¤åˆ¶å¼•ç”¨çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ ln å’Œ hn é“¾æ˜¯å¤åˆ¶å‡ºæ¥çš„ï¼Œè€ŒéåŸæ¥çš„é“¾è¡¨è¿ç§»è¿‡å»çš„ï¼Œæ‰€ä»¥åŸæ¥ hash æ¡¶ä¸Šçš„é“¾è¡¨å¹¶æ²¡æœ‰å—åˆ°å½±å“ï¼Œå› æ­¤ä»è¿ç§»å¼€å§‹åˆ°è¿ç§»ç»“æŸè¿™æ®µæ—¶é—´éƒ½æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®åŸæ•°ç»„ hash æ¡¶ä¸Šé¢çš„é“¾è¡¨ï¼Œè¿ç§»ç»“æŸåæ”¾ç½®ä¸Šfwdï¼Œå¾€åçš„è®¿é—®è¯·æ±‚å°±ç›´æ¥è½¬å‘åˆ°æ‰©å®¹åçš„æ•°ç»„å»äº†ã€‚

- [ConcurrentHashMap æ–¹æ³•æ€»ç»“](https://juejin.im/post/5b001639f265da0b8f62d0f8#comment)

- [LongAdder è§£æ](https://juejin.im/post/6844903909127880717)

## Append-only B+ Tree

- [Append-only B+ Tree](https://blog.csdn.net/lpstudy/article/details/83722007)

    ç†å¿µç±»ä¼¼ MVCC ä¿ç•™å†å²ç‰ˆæœ¬ï¼Œç±»ä¼¼ copyOnWrite ä¿®æ”¹é€šè¿‡æ–°å¢çš„æ–¹å¼ã€‚

## LSM tree

- [LevelDB è®¾è®¡ä¸å®ç° â€”â€” LSM tree](https://blog.csdn.net/anderscloud/article/details/7182165)

    é€šè¿‡é¡ºåºå†™ logï¼Œå†…å­˜å†™ skiplistï¼Œå»¶è¿Ÿæ›´æ–°åˆ é™¤çš„æ–¹å¼ï¼ŒåŠ é€Ÿå†™å…¥çš„é€Ÿåº¦ã€‚

## çº¢é»‘æ ‘ä¸ AVL æ ‘

- [çº¢é»‘æ ‘ä¸ AVL æ ‘æ¯”è¾ƒ](https://www.zhihu.com/question/19856999/answer/1254240739)

    çº¢é»‘æ ‘ç±»ä¼¼æ·»åŠ äº†ç¼“å­˜çš„ AVL æ ‘ã€‚

## LinkedBlockingQueue ä¸ ArrayBlockingQueue

- [LinkedBlockingQueue ä¸ ArrayBlockingQueue æºç åˆ†æ](https://blog.csdn.net/javazejian/article/details/77410889)

    LinkedBlockingQueue å®ç°ä¸­ï¼Œä»¥ put() æ–¹æ³•ä¸ºä¾‹ï¼Œç”Ÿäº§è€…çº¿ç¨‹ä¸åœåœ°æ·»åŠ å…ƒç´ ï¼Œå¦‚æœæ·»åŠ åå®¹é‡ä¸æ»¡ï¼Œä¼šå”¤é†’æ­£åœ¨ç­‰å¾… notFull çš„ç”Ÿäº§è€…ã€‚åªæœ‰å®¹é‡æ»¡äº†ä¹‹åï¼Œç”Ÿäº§è€…ä¼šé˜»å¡ã€‚ä¹‹åæŸä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹äº†å…ƒç´ åï¼Œæ£€æµ‹åˆ°é˜Ÿåˆ—åœ¨æ¶ˆè´¹ä¹‹å‰æ˜¯æ»¡çš„ï¼Œåˆ™ä¼šå”¤é†’ç­‰å¾…çš„ç”Ÿäº§è€…ã€‚
    
    æ‰€ä»¥ï¼Œåœ¨é˜Ÿåˆ—ä»ç©ºå‘æ»¡ï¼Œç”Ÿäº§è€…æ·»åŠ ä»»åŠ¡çš„æ—¶å€™ï¼Œç”Ÿäº§è€…ä¸ä¼šé˜»å¡ï¼Œå½“å› é˜Ÿåˆ—æ»¡é˜»å¡æ—¶ï¼Œä¼šæœ‰æ¶ˆè´¹è€…çº¿ç¨‹å¸®å¿™å”¤é†’ã€‚

- [ä¸ºä»€ä¹ˆArrayBlockingQueueä¸ä½¿ç”¨LinkedBlockingQueueç±»ä¼¼çš„åŒé”å®ç°?](https://blog.csdn.net/icepigeon314/article/details/93792519)

    é¦–å…ˆï¼ŒArrayBlockingQueue å¯ä»¥ä½¿ç”¨åŒé”å®ç°ï¼Œè®¾è®¡è€…å¯èƒ½è®¤ä¸º Java å¹¶ä¸éœ€è¦æ”¯æŒä¸¤ä¸ªç±»ä¼¼çš„ BlockingQueueã€‚

# Java

## Java åŸºç¡€

- [`Class.this` ä¸ `this` çš„åŒºåˆ«](https://stackoverflow.com/questions/5666134/what-is-the-difference-between-class-this-and-this-in-java)

- [`toArray()` ä¸ `toArray(new String[0])`](https://stackoverflow.com/questions/18136437/whats-the-use-of-new-string0-in-toarraynew-string0)

- [`ThreadLocalMap` æ¦‚è§ˆ](https://www.cnblogs.com/xzwblog/p/7227509.html)

    `ThreadLocal` æ˜¯ `Thread` æ“çºµè‡ªå·±çš„ `ThreadLocalMap` çš„å·¥å…·ã€‚

- [åå°„ä¿®æ”¹ `static final` çš„æˆå‘˜å˜é‡](https://www.zhihu.com/question/47054187)

- [éé™æ€å†…éƒ¨ç±»ä¸­çš„éšè—å˜é‡ `this$0` æŒ‡å‘å¤–éƒ¨ç±»](https://stackoverflow.com/questions/28462849/what-does-it-mean-if-a-variable-has-the-name-this0-in-intellij-idea-while-deb/28462949)

- [åå°„æ–¹æ³• `getDeclaredField()` ä¸ `getField()` çš„åŒºåˆ«](https://docs.oracle.com/javase/tutorial/reflect/class/classMembers.html)

    çˆ¶ç±»å±æ€§ä¸ç§æœ‰å±æ€§ä¸å¯å…¼å¾—ã€‚

- [åå°„åŠ è½½è‡ªå®šä¹‰çš„ `java.lang.System` ç±»](https://zhuanlan.zhihu.com/p/77366251)

- [Java lambda è¡¨è¾¾å¼å†…å˜é‡é¡»ä¸º final åŸå› ](https://www.zhihu.com/question/28190927/answer/39786939)

- [ç†è§£ Java çš„çº¿ç¨‹ä¸­æ–­](https://blog.csdn.net/canot/article/details/51087772)

- [Java è‡ªå®šä¹‰åºåˆ—åŒ–](https://www.jianshu.com/p/352fa61e0512)

- [Java åŠ¨æ€ä»£ç†](https://github.com/skykira/TheirNotes/tree/master/SourceCode/JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86)

    - [JDK è‡ªå¸¦åŠ¨æ€ä»£ç†æºç åˆ†æ](https://blog.csdn.net/weixin_43217817/article/details/102268504)

    > JDK æ“ä½œå­—èŠ‚ç ç”Ÿæˆæ‰€éœ€è¦çš„ä»£ç†ç±» `Class`ï¼Œè¯¥ä»£ç†ç±»ç»§æ‰¿äº† `Proxy` å¹¶å®ç°äº†æˆ‘ä»¬çš„æ¥å£ã€‚Proxy ç±»å®ä¾‹æä¾›äº†ä¿å­˜ `InvocationHandler` è‡ªå®šä¹‰é€»è¾‘çš„åŠŸèƒ½ã€‚
    >
    > ä»£ç†ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•ï¼ˆåŒ…æ‹¬ç±»ä¼¼ `toString()`ï¼‰éƒ½é€šè¿‡æˆ‘ä»¬è‡ªå®šä¹‰çš„ `InvocationHandler` çš„ `invoke` æ–¹æ³•æ¥å®ç°ï¼Œå› æ­¤å•ä¸ªä»£ç†ç±»çš„æ–¹æ³•ä¼šè¢«åŠ å…¥åŒæ ·çš„é€»è¾‘ã€‚

    - [CGLib åŠ¨æ€ä»£ç†](https://dannashen.github.io/2019/05/09/Cglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/)

        æ‹¦æˆªå™¨ä¸­å¯¹è¢«æ‹¦æˆªæ–¹æ³•çš„è°ƒç”¨é€šè¿‡ `proxy.invokeSuper(obj, args);` å®Œæˆï¼Œç›¸å½“äºå­ç±»ç›´æ¥è°ƒç”¨çˆ¶ç±»ã€‚

- [æ£€æŸ¥å‹å¼‚å¸¸ä¸éæ£€æŸ¥å‹å¼‚å¸¸](https://blog.csdn.net/u013630349/article/details/50850880)

- [ç±»åŠ è½½å™¨å…¨ç›˜è´Ÿè´£æ€æƒ³çš„é™åˆ¶](https://blog.csdn.net/byamao1/article/details/62884720)

    > è°ƒç”¨è€…åªä¼šä½¿ç”¨å®ƒè‡ªå·±çš„ ClassLoader æ¥è£…è½½åˆ«çš„ç±»

### Reference

- [Java Referenceæ ¸å¿ƒåŸç†åˆ†æ](https://mp.weixin.qq.com/s/8f29ZfGvZVPe0bO-FahokQ)

- [PhantomReference & Cleaner çš„è¿è¡ŒåŸç†](https://zhuanlan.zhihu.com/p/29454205)

### å‡½æ•°å¼ç¼–ç¨‹

- [`BiConsumer` ä¸ºä»€ä¹ˆå¯ä»¥å¼•ç”¨ä»…æœ‰ä¸€ä¸ªå‚æ•°çš„æ–¹æ³•](https://stackoverflow.com/questions/58046693/biconsumer-and-method-reference-of-one-parameter)

### Java å®‰å…¨

- [å¦‚ä½•ç†è§£æ¶æ„ä»£ç æ‰§è¡Œ `AccessController.doPrivileged()`](https://stackoverflow.com/questions/37962070/malicious-code-running-accesscontroller-doprivileged)

- [javaæ²™ç®±ç»•è¿‡](https://www.anquanke.com/post/id/151398)

## Java å¹¶å‘

- [ç”¨æˆ·æ€å†…æ ¸æ€é—´åˆ‡æ¢è€—æ—¶çš„åŸå› ](https://blog.csdn.net/u010727189/article/details/103401970)

- [Java çº¿ç¨‹çŠ¶æ€è½¬æ¢å›¾](http://mcace.me/java%E5%B9%B6%E5%8F%91/2018/08/24/java-thread-states.html)

- [synchronizedçš„å®ç°åŸç†](https://www.cnblogs.com/longshiyVip/p/5213771.html)

- [æ·±å…¥ç†è§£Javaçº¿ç¨‹æ± ï¼šThreadPoolExecutor](http://www.ideabuffer.cn/2017/04/04/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E7%BA%BF%E7%A8%8B%E6%B1%A0%EF%BC%9AThreadPoolExecutor/#addWorker%E6%96%B9%E6%B3%95)

    > *æ± åŒ–æ€æƒ³*ç”¨äºè§£å†³ç³»ç»Ÿèµ„æºç®¡ç†æ–¹é¢çš„é—®é¢˜ï¼Œèƒ½å¤Ÿé™ä½èµ„æºæ¶ˆè€—ï¼ŒåŒæ—¶ä½¿èµ„æºå¯æ§ã€‚
    >
    > åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œç³»ç»Ÿä¸èƒ½å¤Ÿç¡®å®šåœ¨ä»»æ„æ—¶åˆ»ä¸­ï¼Œæœ‰å¤šå°‘ä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œæœ‰å¤šå°‘èµ„æºéœ€è¦æŠ•å…¥ã€‚å¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š
    > 1. é¢‘ç¹ç”³è¯·é”€æ¯è°ƒåº¦ï¼Œç»™ç³»ç»Ÿå¸¦æ¥é¢å¤–æ¶ˆè€—
    > 2. å¯¹èµ„æºæ— é™ç”³è¯·æƒ…å†µï¼Œç¼ºå°‘æŠ‘åˆ¶æ‰‹æ®µ
    > 3. ç³»ç»Ÿæ— æ³•åˆç†ç®¡ç†å†…éƒ¨èµ„æºåˆ†å¸ƒ

    æµç¨‹ï¼š
    æœªè¾¾åˆ° corePoolSizeï¼Œæäº¤çš„ä»»åŠ¡è¢«åŒ…è£…æˆ Workerï¼Œç›´æ¥è¿è¡Œã€‚å¦åˆ™ï¼Œæäº¤ä¸ºä»»åŠ¡ï¼Œç­‰å¾…æ‰§è¡Œã€‚è‹¥æ˜¯ä»»åŠ¡é˜Ÿåˆ—æ»¡äº†ï¼Œå°±æ·»åŠ æ–°çš„ Workerï¼Œåˆ°è¾¾æœ€å¤§çº¿ç¨‹å®¹é‡æ—¶ï¼Œæ‹’ç»ç­–ç•¥ç”Ÿæ•ˆã€‚

- [ç»ˆæ­¢çº¿ç¨‹æ± åŸç†](https://www.cnblogs.com/trust-freedom/p/6693601.html)

    è°ƒç”¨ `shutdown()` åï¼Œä¼šå°†çº¿ç¨‹æ± çŠ¶æ€ç½®ä¸º `SHUTDOWN` å¹¶ä¸­æ–­æ‰€æœ‰ç©ºé—²çº¿ç¨‹ï¼Œä½†æ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹ä¸ä¼šã€‚
    
    `SHUTDOWN` çŠ¶æ€çš„çº¿ç¨‹å°†ä¸å†æœ‰æ–°çš„ä»»åŠ¡åŠ å…¥ï¼Œä¹‹å‰æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡åï¼Œæœ€ç»ˆä¼šé˜»å¡åœ¨è·å–ä»»åŠ¡å¤„ï¼Œå¯¼è‡´çº¿ç¨‹æ± æ— æ³•ä» `SHUTDOWN` çŠ¶æ€å˜ä¸ºç»“æŸçŠ¶æ€ã€‚

    å› æ­¤ï¼Œçº¿ç¨‹æ± çš„è®¾è®¡ä¸­ï¼ŒDoug Lea åœ¨æ‰€æœ‰å¯èƒ½å¯¼è‡´çº¿ç¨‹æ± äº§ç»ˆæ­¢çš„åœ°æ–¹å®‰æ’äº† `tryTerminated()`ï¼Œå°è¯•ç»ˆæ­¢çº¿ç¨‹æ± ï¼Œåœ¨å…¶ä¸­åˆ¤æ–­å¦‚æœçº¿ç¨‹æ± å·²ç»è¿›å…¥ç»ˆæ­¢æµç¨‹ï¼Œæ²¡æœ‰ä»»åŠ¡ç­‰å¾…æ‰§è¡Œäº†ï¼Œä½†çº¿ç¨‹æ± è¿˜æœ‰çº¿ç¨‹ï¼Œä¾¿ä¸­æ–­å”¤é†’ä¸€ä¸ªç©ºé—²çº¿ç¨‹ã€‚å½“è¯¥çº¿ç¨‹è¢«å”¤é†’ç»§ç»­è¿è¡Œåˆ°é€€å‡ºæ—¶ï¼Œä¼šç»§ç»­ä¼ æ’­ä¸­æ–­è¡Œä¸ºã€‚

- [UncaughtExceptionHandler è§£æ](https://www.jianshu.com/p/f22efc8ef594)

- [weakCompareAndSet() è§£æ](https://www.jianshu.com/p/55a66113bc54)

    `weakCompareAndSet()` åº•å±‚ä¸ä¼šåˆ›å»ºä»»ä½• happen-before çš„ä¿è¯ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šå¯¹ volatile å­—æ®µæ“ä½œçš„å‰ååŠ å…¥å†…å­˜å±éšœã€‚å› æ­¤å°±æ— æ³•ä¿è¯å¤šçº¿ç¨‹æ“ä½œä¸‹å¯¹é™¤äº† weakCompareAndSet æ“ä½œçš„ç›®æ ‡å˜é‡(è¯¥ç›®æ ‡å˜é‡ä¸€å®šæ˜¯ä¸€ä¸ª volatile å˜é‡)ä¹‹å…¶ä»–çš„å˜é‡è¯»å–å’Œå†™å…¥æ•°æ®çš„æ­£ç¡®æ€§ã€‚

- [CompletableFuture çš„æ‰§è¡Œæ¨¡å‹](https://zhuanlan.zhihu.com/p/88321058)

    Async åç¼€ä»£è¡¨å°†ä»»åŠ¡äº¤ç»™é»˜è®¤æˆ–æŒ‡å®šçº¿ç¨‹æ± ï¼Œä¸å¸¦ Async åç¼€çš„æ–¹æ³•ï¼Œå¯èƒ½ä½¿ç”¨ä¸Šä¸€ä¸ªæ–¹æ³•çš„çº¿ç¨‹ï¼Œä¹Ÿå¯èƒ½ä½¿ç”¨ä¸»çº¿ç¨‹ï¼ŒäºŒè€…é€‰ä¸€ã€‚

### volatile

- [volatile çš„åº•å±‚å®ç°](https://www.zhihu.com/question/65372648/answer/415311977)

    é€šè¿‡ Ringbus + MESIåè®®çš„æ–¹å¼ï¼Œè¢«ç§°ä¸º Cache Lockingã€‚

    MESIå¤§è‡´çš„æ„æ€æ˜¯ï¼šè‹¥å¹²ä¸ªCPUæ ¸å¿ƒé€šè¿‡ringbusè¿åˆ°ä¸€èµ·ã€‚æ¯ä¸ªæ ¸å¿ƒéƒ½ç»´æŠ¤è‡ªå·±çš„Cacheçš„çŠ¶æ€ã€‚å¦‚æœå¯¹äºåŒä¸€ä»½å†…å­˜æ•°æ®åœ¨å¤šä¸ªæ ¸é‡Œéƒ½æœ‰cacheï¼Œåˆ™çŠ¶æ€éƒ½ä¸ºSï¼ˆsharedï¼‰ã€‚ä¸€æ—¦æœ‰ä¸€æ ¸å¿ƒæ”¹äº†è¿™ä¸ªæ•°æ®ï¼ˆçŠ¶æ€å˜æˆäº†Mï¼‰ï¼Œå…¶ä»–æ ¸å¿ƒå°±èƒ½ç¬é—´é€šè¿‡ringbusæ„ŸçŸ¥åˆ°è¿™ä¸ªä¿®æ”¹ï¼Œä»è€ŒæŠŠè‡ªå·±çš„cacheçŠ¶æ€å˜æˆIï¼ˆInvalidï¼‰ï¼Œå¹¶ä¸”ä»æ ‡è®°ä¸ºMçš„cacheä¸­è¯»è¿‡æ¥ã€‚åŒæ—¶ï¼Œè¿™ä¸ªæ•°æ®ä¼šè¢«åŸå­çš„å†™å›åˆ°ä¸»å­˜ã€‚æœ€ç»ˆï¼Œcacheçš„çŠ¶æ€åˆä¼šå˜ä¸ºSã€‚

### AQS

- [AbstractQueuedSynchronizer æºç è§£è¯»](https://www.cnblogs.com/micrari/p/6937995.html)

- [CLHã€MCSé˜Ÿåˆ—é”](https://www.cnblogs.com/sanzao/p/10567529.html)

    è‡ªæ—‹é”å…·æœ‰ä¸€å®šçš„ç¼ºé™·ï¼Œéå…¬å¹³ã€çº¿ç¨‹é¥¥é¥¿ã€é”æ ‡è¯†åŒæ­¥è€—è´¹èµ„æºï¼Œå› æ­¤äº§ç”Ÿäº†é˜Ÿåˆ—é”ï¼Œå¯¹å¤šä¸ªè‡ªæ—‹é”è¿›è¡Œç®¡ç†ã€‚

- setHead()

    é˜Ÿåˆ—ä¸­çš„èŠ‚ç‚¹ï¼Œè·å–åˆ°é”åï¼Œå°† head æŒ‡å‘è¯¥èŠ‚ç‚¹ï¼ŒåŒæ—¶å°† threadã€predã€next ç½®ä¸º nullï¼Œä»¿ä½›å°±å˜ä¸ºäº†è™šæ‹Ÿå¤´ç»“ç‚¹ï¼Œä»…ä¿ç•™åç»§ç»“ç‚¹å¯¹è¯¥å¤´èŠ‚ç‚¹çš„æŒ‡å‘ã€‚

### åå‘é”âœ¨

- [åå‘é”çš„æ‰¹é‡é‡åå‘ä¸æ‰¹é‡æ’¤é”€](https://www.cnblogs.com/LemonFive/p/11248248.html)

    å‡è®¾æœ‰ç±» Aã€‚

    1. åˆå§‹çŠ¶æ€çš„å¯¹è±¡ a ä¸ºå¯åå‘æœªåå‘çŠ¶æ€

    2. å½“`çº¿ç¨‹ 1` å¯¹å¯¹è±¡ a1 åŠ é”åï¼Œa1 å¯¹è±¡å¤´ markword çŠ¶æ€åå‘äº`çº¿ç¨‹ 1`ï¼Œä¹‹å`çº¿ç¨‹ 1`åŠ é”æ—¶ï¼Œå‘ç°é”åå‘äºè‡ªå·±ï¼Œæ— éœ€ CAS æ›¿æ¢å¯¹è±¡å¤´ï¼Œå¯ç›´æ¥è¿›å…¥åŒæ­¥å—ã€‚
    3. `çº¿ç¨‹ 2`æƒ³è¦å¯¹å¯¹è±¡ a1 åŠ é”ï¼Œå‘ç° a1 åå‘äº `çº¿ç¨‹ 1`ï¼Œè§¦å‘é”æ’¤é”€ï¼Œæ­¤æ—¶ a1 çš„é”å‡çº§ä¸ºè½»é‡çº§é”ã€‚
    4. `çº¿ç¨‹ 2`åœ¨ `BiasedLockingDecayTime`(é»˜è®¤25s) æ—¶é—´å†…å¯¹ç±» A çš„åå‘é”æ’¤é”€æ•°é‡è¾¾åˆ°é‡åå‘é˜ˆå€¼(BiasedLockingBulkRebiasThreshold)æ—¶ï¼Œè§¦å‘æ‰¹é‡é‡åå‘ï¼Œepoch å€¼åŠ ä¸€ï¼Œç›¸å½“äºå°† A ç±»æ‰€æœ‰å¯¹è±¡çš„åå‘é”å¤±æ•ˆï¼Œé‡ç½®ä¸ºå¯åå‘æœªåå‘çŠ¶æ€ã€‚æ­¤æ—¶ï¼Œè‹¥æœ‰çº¿ç¨‹å¯¹å¯¹è±¡ a åŠ é”ï¼Œå¯¹è±¡å°†ä¼šåå‘äºè¯¥çº¿ç¨‹ã€‚
    5. `çº¿ç¨‹ x`(æˆ–å…¶å®ƒä»»æ„çº¿ç¨‹) å¯¹å·²åå‘å…¶å®ƒçº¿ç¨‹çš„å¯¹è±¡ ax åŠ é”ï¼Œè§¦å‘åå‘é”æ’¤é”€ï¼Œå½“é”æ’¤é”€æ•°é‡è¾¾åˆ°æ‰¹é‡é”æ’¤é”€é˜ˆå€¼(BiasedLockingBulkRevokeThreshold)æ—¶ï¼Œè§¦å‘æ‰¹é‡é”æ’¤é”€ï¼Œç±» A æ–°ç”Ÿæˆå¯¹è±¡ markword åˆå§‹çŠ¶æ€ä¸ºæ— é”ä¸å¯åå‘çŠ¶æ€ã€‚

- `Eliminating Synchronization-Related Atomic Operations with Biased Locking and Bulk Rebiasing` [åå‘é”è®ºæ–‡é˜…è¯»](https://www.jianshu.com/p/e47ad923dee5)

    `è½»é‡çº§é”`çš„æŠ€æœ¯å‡è®¾æ˜¯ï¼Œåœ¨å®é™…ç¨‹åºä¸­ï¼Œå¤§å¤šæ•°é”çš„è·å–æ˜¯æ²¡æœ‰äº‰ç”¨çš„ã€‚
    
    `åå‘é”`çš„æŠ€æœ¯å‡è®¾æ˜¯ï¼Œå¤§å¤šæ•°ç›‘è§†å™¨ä¸ä»…æ˜¯æ²¡æœ‰äº‰ç”¨çš„ï¼Œè€Œä¸”åœ¨å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸä¸­ä»…æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥å’Œé€€å‡ºã€‚

    æ‰¹é‡é‡åå‘è®¤ä¸ºï¼Œå½“åå‘é”æ’¤é”€æ•°é‡è¾¾åˆ°æŸä¸ªé˜ˆå€¼æ—¶ï¼Œå¯¹è±¡å½“ä¸‹çš„åå‘å·²ç»æ²¡æœ‰æ”¶ç›Šäº†ï¼Œéœ€è¦é‡æ–°é€‰æ‹©åå‘ã€‚æ‰¹é‡é”æ’¤é”€è®¤ä¸ºï¼Œè¾¾åˆ°è¯¥é˜ˆå€¼æ—¶ï¼Œè¯¥ç±»ç¡®å®å­˜åœ¨ç«äº‰ï¼Œå·²ç»ä¸é€‚åˆä½¿ç”¨åå‘é”äº†ã€‚

    åå‘é”çš„å‡çº§è¿‡ç¨‹ï¼š

    1. T1 æŒæœ‰ a1 çš„åå‘é”ï¼ŒT2 è·å–é”æ—¶ï¼Œå‘ç° a1 åå‘ T1ã€‚
    2. æŸ¥çœ‹ a1 markword ä¸­ epoch å€¼æ˜¯å¦ä¸ç±» A çš„ epoch å€¼ä¸€è‡´ï¼Œä¸ä¸€è‡´åˆ™è¡¨ç¤º a1 å½“å‰çš„åå‘æ— æ•ˆï¼Œå¯ä»¥ç›´æ¥å°† a1 åå‘äºè‡ªå·±ã€‚
    3. å¦‚æœä¸€è‡´ï¼Œå¼€å§‹æ‰§è¡Œé”æ’¤é”€ã€‚
    4. å½“ç¨‹åºè¿è¡Œåˆ°å…¨å±€å®‰å…¨ç‚¹æ—¶ï¼ŒT2 éå†åå‘é”æŒæœ‰çº¿ç¨‹çš„çº¿ç¨‹æ ˆï¼ŒæŸ¥æ‰¾ä¸å¯¹è±¡ a1 ç›¸å…³çš„ `Lock Record`ã€‚
    
    > åå‘é”è·å–æ—¶ï¼Œä¼šåœ¨å½“å‰çº¿ç¨‹çº¿ç¨‹æ ˆä¸­ç½®å…¥ä¸€ä¸ªç©ºç½®çš„ `Lock Record`ï¼Œä¸”æ— éœ€ CAS å¡«å…¥ `displaced markword`ã€‚

    5. éå†åˆ°åï¼Œå°†è½»é‡çº§é”éœ€è¦çš„ markword å¡«å……è¿›å»ï¼Œå®Œæˆè½»é‡çº§é”å‡çº§ã€‚
    6. å¦‚æœæ²¡æœ‰éå†åˆ°ï¼Œåˆ™å°†å¯¹è±¡ markword çŠ¶æ€æ”¹ä¸ºå¯åå‘æœªåå‘çŠ¶æ€ï¼Œç„¶åé‡æ–° CAS å°è¯•è·å–é”ã€‚

- [å¯¹è±¡è®¡ç®— hashcode å°†å¯¼è‡´åå‘é”è†¨èƒ€](https://www.zhihu.com/question/52116998)

    å½“ä¸€ä¸ªå¯¹è±¡å½“å‰æ­£å¤„äºåå‘é”çŠ¶æ€ï¼Œå¹¶ä¸”éœ€è¦è®¡ç®—å…¶identity hash codeçš„è¯ï¼Œåˆ™å®ƒçš„åå‘é”ä¼šè¢«æ’¤é”€ï¼Œå¹¶ä¸”é”ä¼šè†¨èƒ€ä¸ºé‡é‡é”ã€‚

- [Java ä¸­ `volatile` çš„è¯­ä¹‰](https://www.jianshu.com/p/4e59476963b0)

- [Javaä¸­çš„åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”è§£æ](https://blog.csdn.net/lengxiao1993/article/details/81568130?depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1&utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1)

- [Monitor é™çº§](https://wiki.openjdk.java.net/display/HotSpot/Async+Monitor+Deflation#AsyncMonitorDeflation-AnExampleofObjectMonitorInterferenceDetection)

    Monitor å…¨å±€å­˜åœ¨å¤šä¸ªï¼Œåˆå§‹æ²¡æœ‰ï¼Œéœ€è¦çš„æ—¶å€™ï¼Œåˆ›å»ºï¼›ä¸ç”¨æ—¶ï¼Œå‡å°‘ã€‚

- [Javaä¸­çš„é”é™çº§](https://www.zhihu.com/question/63859501)
  - [Javaä¸­çš„é”çº§é™ææ¡ˆâœ¨âœ¨](http://openjdk.java.net/jeps/8183909)

    è¯¥ä¼˜åŒ–ææ¡ˆæ˜¾ç¤ºï¼Œç›®å‰ï¼Œå®ç°é‡é‡çº§é”çš„ `monitor` å¯¹è±¡å¯ä»¥åœ¨STWæ—¶è¢«æ¸…é™¤ï¼Œæ¸…é™¤çš„æ˜¯é‚£äº›åªæœ‰ `VM Thread`ä¼šå»è®¿é—®å®ƒä»¬çš„ `monitor` å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯ï¼Œä¸å†ä½¿ç”¨çš„ `monitor` å¯¹è±¡ï¼‰ã€‚

    å› æ­¤ï¼Œé‡é‡çº§é”å¯ä»¥é™çº§ä¸ºè½»é‡çº§é”ã€‚

- [`ReentrantReadWriteLock` ä¿è¯ `readHolds` çš„å¯è§æ€§](https://stackoverflow.com/questions/1675268/java-instance-variable-visibility-threadlocal)

- [LockSupport.park() åŸç†](https://blog.csdn.net/anlian523/article/details/106752414)

    å¦‚æœä¸­æ–­çŠ¶æ€ä¸ºtrueï¼Œé‚£ä¹ˆparkæ— æ³•é˜»å¡ã€‚

## Java IO

- [Java I/Oä½“ç³»ä»åŸç†åˆ°åº”ç”¨](https://mp.weixin.qq.com/s/khyOVIqFp1vNK29OIMBBuQ)

- [é˜»å¡éé˜»å¡ä¸åŒæ­¥å¼‚æ­¥çš„ç†è§£](https://www.zhihu.com/question/19732473/answer/88599695)

  âœ¨[æ¦‚å¿µç†è§£](https://www.zhihu.com/question/19732473/answer/871835155): 
  åŒæ­¥å¼‚æ­¥å…³æ³¨çš„æ˜¯ï¼Œé€šä¿¡åŒæ–¹çš„åä½œæ¨¡å¼ï¼ŒåŒæ­¥åˆ™æ„å‘³ç€é’ˆå¯¹å½“å‰ä¸šåŠ¡ï¼ŒåŒæ–¹éœ€è¦ä¸²è¡Œè¿›è¡Œï¼Œå¼‚æ­¥åˆ™å¯ä»¥å¹¶è¡Œè¿›è¡Œã€‚é˜»å¡éé˜»å¡å…³æ³¨çš„æ˜¯ï¼Œè°ƒç”¨è€…çš„çŠ¶æ€ï¼Œåœ¨ä¸šåŠ¡ç­‰å¾…æœŸï¼Œæ˜¯é˜»å¡ç­‰å¾…è¿˜æ˜¯å¿™ç­‰ã€‚

  åœ¨ä¸åŒå±‚æ¬¡ï¼Œä¸Šè¿°æ¦‚å¿µæœ‰ä¸åŒçš„è¡¨ç°å½¢å¼ã€‚
   - åœ¨è¿›ç¨‹é€šä¿¡å±‚é¢ï¼ŒåŒæ­¥åˆ™æ„å‘³ç€é˜»å¡ï¼Œå¼‚æ­¥åˆ™æ„å‘³ç€éé˜»å¡ã€‚
   - åœ¨Linux I/Oå±‚é¢ï¼ŒåŒæ­¥å¯ä»¥é˜»å¡ï¼Œå¯ä»¥éé˜»å¡ï¼Œå¼‚æ­¥ä¸ºéé˜»å¡ã€‚
   - åœ¨[ç½‘ç»œé€šä¿¡](https://www.zhihu.com/question/19732473/answer/308092103)ä¸­ï¼Œä¸»è¦æ˜¯åŒæ­¥é˜»å¡å’Œå¼‚æ­¥éé˜»å¡ã€‚åŒæ­¥æ„å‘³ç€ï¼Œå‘é€æ–¹å‘å‡ºè¯·æ±‚åç­‰å¾…è¿”å›ç»“æœï¼Œç„¶åå‘å‡ºä¸‹ä¸€æ¬¡è¯·æ±‚ã€‚å¼‚æ­¥æ„å‘³ç€ï¼Œå‘é€æ–¹ä¸å¿…ç­‰å¾…ç»“æœå¯å‘é€ä¸‹ä¸€æ¬¡è¯·æ±‚ã€‚

  æ€»çš„æ¥è¯´ï¼Œ[å¼‚æ­¥æ˜¯ç¼–ç¨‹è¯­è¨€å’Œè°ƒç”¨çš„APIååŒæ¨¡æ‹Ÿå‡ºæ¥çš„ä¸€ç§ç¨‹åºæ§åˆ¶æµé£æ ¼](https://www.zhihu.com/question/19732473/answer/103182244)ã€‚ç¨‹åºå¯ä»¥åœ¨åŒæ­¥ API ä¸Šæ¨¡æ‹Ÿå‡ºå¼‚æ­¥è°ƒç”¨(æ¯”å¦‚å¤šçº¿ç¨‹)ï¼Œä¹Ÿå¯ä»¥å±è”½åº•å±‚çš„å¼‚æ­¥æ¥å£ã€‚

# JVM

- [å›¾è¯´ Java å­—èŠ‚ç æŒ‡ä»¤](https://segmentfault.com/a/1190000008606277)

- [Java ç¼–è¯‘å™¨ä¼˜åŒ–å’Œè¿è¡ŒæœŸä¼˜åŒ–æ¦‚è§ˆ](https://blog.csdn.net/u013305783/article/details/81279175)

- [`Thread-Local Handshakes` ä¼˜åŒ–å®‰å…¨ç‚¹STW](https://openjdk.java.net/jeps/312)

    å¯¹è±¡çš„åå‘é”æ’¤é”€æ“ä½œä¹Ÿå¯ä»¥æ— éœ€ç¨‹åºè¿è¡Œåˆ° `SafePoint`

- [Javaå¯åŠ¨å‚æ•° `javaagent` çš„ä½¿ç”¨](https://www.cnblogs.com/rickiyang/p/11368932.html)

- [JVM åˆ›å»ºå¯¹è±¡æ—¶çš„å¿«é€Ÿåˆ†é…ä¸æ…¢é€Ÿåˆ†é…](https://developer.aliyun.com/article/724637)

    JVM åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼š
    
    1. å°è¯•åœ¨TLABä¸­åˆ†é…å¯¹è±¡
   
    2. å¦‚æœTLABä¸­æ²¡æœ‰ç©ºé—´ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŸå­æŒ‡ä»¤ä»edenåˆ†é…æ–°çš„TLABæˆ–ç›´æ¥åœ¨edenä¸­åˆ›å»ºå¯¹è±¡
   
    3. å¦‚æœä¼Šç”¸å›­ä¸­æ²¡æœ‰åœ°æ–¹ï¼Œé‚£ä¹ˆå°†è¿›è¡Œåƒåœ¾æ”¶é›†
   
    4. å¦‚æœä¹‹åæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œåˆ™å°è¯•åœ¨è€å¹´ä»£ä¸­è¿›è¡Œåˆ†é…
   
    5. å¦‚æœå¤±è´¥ï¼Œé‚£ä¹ˆæŠ¥ OOM
   
    6. å¯¹è±¡è®¾ç½®æ ‡å¿—å¤´ï¼Œç„¶åè°ƒç”¨æ„é€ å‡½æ•°

- [ç¼“å­˜è¡Œä¼ªå…±äº« (False Sharing)](http://ifeve.com/falsesharing/)

- [ç†è§£ TLAB](https://www.jianshu.com/p/2343f2c0ecc4)
- [ç†è§£ PLAB](https://blog.csdn.net/superfjj/article/details/107220117)

    çº¿ç¨‹ä½äº Survivor åŒºå’Œ old åŒºçš„åˆ†é…ç¼“å†²åŒºã€‚

## åƒåœ¾æ”¶é›†

- [OopMap](https://blog.csdn.net/anyan8023/article/details/74914623?utm_source=blogxgwz3)

    æ¯ä¸ªæ–¹æ³•å¯èƒ½ä¼šæœ‰å¥½å‡ ä¸ªoopMapï¼Œå°±æ˜¯æ ¹æ® safepoint æŠŠä¸€ä¸ªæ–¹æ³•çš„ä»£ç åˆ†æˆå‡ æ®µï¼Œæ¯ä¸€æ®µä»£ç ä¸€ä¸ª oopMapï¼Œä½œç”¨åŸŸè‡ªç„¶ä¹Ÿä»…é™äºè¿™ä¸€æ®µä»£ç ã€‚

### CMS

- [CMS åƒåœ¾æ”¶é›†è¿‡ç¨‹](https://zhuanlan.zhihu.com/p/54286173)

  - [CMS GCæ—¥å¿—åˆ†æ](https://www.cnblogs.com/zhangxiaoguang/p/5792468.html)

  - [concurrent-preclean å’Œ concurrent-abortable-preclean ä¸¤ä¸ªé˜¶æ®µçš„ä½œç”¨](https://zhuanlan.zhihu.com/p/150696908)

    YGC æ—¶ï¼Œå¡è¡¨çš„ä½œç”¨æ˜¯æ‰¾åˆ°è·¨å¸¦å¼•ç”¨ã€‚æ­¤æ—¶ï¼Œå¡è¡¨çš„ä½œç”¨æ˜¯è®°å½•å¹¶å‘æ ‡è®°é˜¶æ®µè¢«åº”ç”¨ç¨‹åºå¹¶å‘ä¿®æ”¹çš„å¯¹è±¡å¼•ç”¨ã€‚

    preclean é˜¶æ®µæ˜¯å¯¹è¿™äº› card marking äº§ç”Ÿçš„ dirty card è¿›è¡Œ cleanï¼ŒCMS GC çº¿ç¨‹ä¼šæ‰«æ dirty card å¯¹åº”çš„å†…å­˜åŒºåŸŸï¼Œæ›´æ–°ä¹‹å‰è®°å½•çš„è¿‡æ—¶çš„å¼•ç”¨ä¿¡æ¯ï¼Œå¹¶ä¸”å»æ‰ dirty card çš„æ ‡è®°ã€‚

    concurrent-abortable-preclean ç”¨äºè°ƒåº¦ remark çš„å¼€å§‹æ—¶æœºï¼Œé˜²æ­¢è¿ç»­ STWã€‚

- [CMS åƒåœ¾æ”¶é›†è¿‡ç¨‹](https://www.bilibili.com/read/cv6830986/)

    å¡è¡¨è¿˜æœ‰ä¸€ä¸ªä½œç”¨å°±æ˜¯å‘ç”ŸYGCçš„æ—¶å€™ç”¨æ¥æŸ¥çœ‹æœ‰æ²¡æœ‰è€å¹´ä»£çš„å¯¹è±¡å¼•ç”¨æ–°ç”Ÿä»£ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡éƒ½éå†è€å¹´ä»£çš„å¯¹è±¡çš„ã€‚

    card tableåªæœ‰ä¸€ä»½ï¼Œæ—¢è¦ç”¨æ¥æ”¯æŒyoung GCåˆè¦ç”¨æ¥æ”¯æŒCMSã€‚æ¯æ¬¡young GCè¿‡ç¨‹ä¸­éƒ½æ¶‰åŠé‡ç½®å’Œé‡æ–°æ‰«æcard tableï¼Œè¿™æ ·æ˜¯æ»¡è¶³äº†young GCçš„éœ€æ±‚ï¼Œä½†å´ç ´åäº†CMSçš„éœ€æ±‚â€”â€”CMSéœ€è¦çš„ä¿¡æ¯å¯èƒ½è¢«young GCç»™é‡ç½®æ‰äº†ã€‚

    ä¸ºäº†é¿å…ä¸¢å¤±ä¿¡æ¯ï¼Œå°±åœ¨card tableä¹‹å¤–å¦å¤–åŠ äº†ä¸€ä¸ªbitmapå«åšmod-union tableã€‚åœ¨CMS concurrent markingæ­£åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ¯å½“å‘ç”Ÿä¸€æ¬¡young GCï¼Œå½“young
    GCè¦é‡ç½®card tableé‡Œçš„æŸä¸ªè®°å½•æ—¶ï¼Œå°±ä¼šæ›´æ–° [mod-union table](https://blog.csdn.net/mark__zeng/article/details/48751053) å¯¹åº”çš„bitã€‚

    è¿™æ ·ï¼Œæœ€ååˆ°CMS remarkçš„æ—¶å€™ï¼Œå½“æ—¶çš„card tableå¤–åŠ mod-union tableå°±è¶³ä»¥è®°å½•åœ¨å¹¶å‘æ ‡è®°è¿‡ç¨‹ä¸­old genå‘ç”Ÿçš„æ‰€æœ‰å¼•ç”¨å˜åŒ–äº†ã€‚

### G1

- [G1 åƒåœ¾å›æ”¶ç®—æ³•åŸç†](https://hllvm-group.iteye.com/group/topic/44381)

    - [G1 åƒåœ¾å›æ”¶ç®—æ³•æ€»è§ˆ](https://www.jianshu.com/p/a3e6a9de7a5d)

    - [G1 æ¦‚å¿µç†è§£](https://blog.csdn.net/coderlius/article/details/79272773)

    - [æ·±å…¥ç†è§£ G1 çš„ GC æ—¥å¿—](https://club.perfma.com/article/233563)

    - [G1 SATBå’Œ Incremental Update ç®—æ³•çš„åŒºåˆ«](https://www.jianshu.com/p/8d37a07277e0)

        SATB è®¤ä¸ºæ ‡è®°å¼€å§‹æ—¶ï¼Œæ‰€æœ‰æ´»ç€çš„å¯¹è±¡åœ¨ä¹‹åå¹¶å‘æ ‡è®°æ—¶ä¹Ÿæ˜¯å­˜æ´»çš„ï¼Œå› æ­¤å½“ç™½å¯¹è±¡æ–­å¼€æŸä¸ªå¼•ç”¨æ—¶ï¼Œå°†è¯¥å¼•ç”¨å‹å…¥éå†å †æ ˆï¼Œä¹Ÿå°±æ˜¯å°†è¯¥ç™½å¯¹è±¡å˜ä¸ºç°å¯¹è±¡ã€‚

        Incremental Update åœ¨æŸä¸ªé»‘å¯¹è±¡åˆå¼•ç”¨äº†æŸä¸ªç™½å¯¹è±¡æ—¶ï¼Œä¼šå°†è¯¥é»‘å¯¹è±¡ç½®ç°ï¼Œå› æ­¤è¯¥ç®—æ³•åœ¨å®Œæˆå¹¶å‘ marking å éœ€è¦é‡æ–°æ‰«ææ ¹é›†åˆï¼Œé‡æ–°å°†ç°ç½®é»‘ã€‚

    - [Region ä¸¤ä¸ª Bitmap è¯¦è§£ ](https://mp.weixin.qq.com/s/5BIFme6bmyOA0WbKOllbjw)

        Region çš„ prevTAMS å’Œ nextTAMS ç”¨äºè®°å½•å¹¶å‘æ ‡è®°è¿‡ç¨‹ä¸­ï¼Œæ–°åˆ†é…çš„å¯¹è±¡ï¼ŒåŒæ—¶å­˜å‚¨ä¸ªå¿«ç…§ã€‚

    - [G1-Card Table å’Œ RSet çš„å…³ç³»](https://blog.csdn.net/luzhensmart/article/details/106052574)

    - [RSet ç»“æ„è§£é‡Š](https://zhuanlan.zhihu.com/p/130479811?utm_source=wechat_session&utm_medium=social&utm_oi=70601460940800)

        RSet æ˜¯ä¸€ä¸ª points-into ç»“æ„ï¼Œè®°å½•äº†è°å¼•ç”¨äº†æˆ‘ã€‚
        
        å®ƒå¯ä»¥çœ‹åšä¸€ä¸ª Hashtable<key,int[]>ã€‚key ä¸ºå…¶å®ƒ Regionï¼Œint[] ä»£è¡¨äº†å…¶å®ƒ Region çš„ `Card Table`ã€‚åƒåœ¾æ”¶é›†æ—¶ï¼Œæ‰¾åˆ° RSet ä¸­æŒ‡ç¤ºçš„åŒºåŸŸï¼Œä½œä¸º GCRoots çš„ä¸€éƒ¨åˆ†ã€‚
    
    âœ¨ç§äººæ€»ç»“ï¼š
    
    G1 åƒåœ¾æ”¶é›†åˆ†ä¸ºä¸¤ä¸ªå¤§éƒ¨åˆ†ï¼š

    - å…¨å±€å¹¶å‘æ ‡è®°ï¼ˆglobal concurrent markingï¼‰
    - å¯¹è±¡æ‹·è´æ¸…ç†ï¼ˆevacuationï¼‰

        é’ˆå¯¹ä¸åŒçš„é€‰å®šCSetçš„æ¨¡å¼ï¼Œåˆ†åˆ«å¯¹åº”young GCä¸mixed GC
      - Young GCï¼šé€‰å®šæ‰€æœ‰young gené‡Œçš„region
      - Mixed GCï¼šé€‰å®šæ‰€æœ‰young gené‡Œçš„regionï¼Œå¤–åŠ æ ¹æ®global concurrent markingç»Ÿè®¡å¾—å‡ºæ”¶é›†æ”¶ç›Šé«˜çš„è‹¥å¹²old gen region

    YGC æ—¥å¿—åˆ†æ
    ```java
    3.378: [GC pause (G1 Evacuation Pause) (young), 0.0015185 secs]
    //å¹¶è¡Œé˜¶æ®µ
   [Parallel Time: 0.7 ms, GC Workers: 4]
   //GC çº¿ç¨‹å¯åŠ¨
      [GC Worker Start (ms): Min: 3378.1, Avg: 3378.3, Max: 3378.6, Diff: 0.5]
      //æ­¤æ´»åŠ¨å¯¹å †å¤–çš„æ ¹è¿›è¡Œæ‰«æï¼Œå¦‚JVMç³»ç»Ÿç›®å½•ã€VMæ•°æ®ç»“æ„ã€JNIçº¿ç¨‹å¥æŸ„ã€ç¡¬ä»¶å¯„å­˜å™¨ã€å…¨å±€å˜é‡ã€çº¿ç¨‹æ ˆ
      [Ext Root Scanning (ms): Min: 0.0, Avg: 0.1, Max: 0.2, Diff: 0.2, Sum: 0.6]
      /*Rset è®°å½•äº†è°æŒ‡å‘æˆ‘ï¼Œä»è€Œé¿å…äº†å…¨å †æ‰«æã€‚
      Rset çš„ç»´æŠ¤åŒ…æ‹¬ä¸¤ä¸ªæ–¹é¢ï¼Œå†™å‰æ …æ ï¼ˆPre-Write Barrrierï¼‰å’Œå†™åæ …æ ï¼ˆPost-Write Barrrierï¼‰ã€‚
      èµ‹å€¼è¯­å¥åï¼Œç­‰å¼å·¦å€¼ä¿®æ”¹å®ƒçš„å¼•ç”¨åˆ°æ–°çš„å¯¹è±¡ã€‚å·¦å€¼åŸæ¥å¼•ç”¨çš„å¯¹è±¡å¤±å»äº†ä¸€ä¸ªå¼•ç”¨ï¼Œå®ƒæ‰€åœ¨çš„åŒºåŸŸçš„ Rset åº”å½“æ›´æ–°ã€‚èµ‹å€¼è¯­å¥åï¼Œç­‰å¼å³å€¼è·å¾—äº†å·¦å€¼å¯¹å®ƒçš„å¼•ç”¨ï¼Œå› æ­¤å³å€¼æ‰€åœ¨åŒºåŸŸçš„ Rset éœ€è¦æ›´æ–°ã€‚
      ä½†å¤„äºæ€§èƒ½è€ƒè™‘ï¼ŒRSet ä¸ä¼šç«‹åˆ»è¢«è¢«æ›´æ–°ï¼Œè€Œæ˜¯åç»­é€šè¿‡æ—¥å¿—æ¥æ›´æ–°ã€‚
      å†™å‰æ …æ è¿˜ç”¨äºå®ç° SATBï¼Œå†™åæ …æ è¿˜ç”¨äºç»´æŠ¤ Card Tableã€‚
      */
      //å¹¶å‘ä¼˜åŒ–çº¿ç¨‹æ›´æ–° RSet
      [Update RS (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]
        //å¹¶å‘ä¼˜åŒ–çº¿ç¨‹ï¼ˆConcurrence Refinement Threadsï¼‰ä¸“æ³¨äºé€šè¿‡æ‰«ææ—¥å¿—ç¼“å†²åŒºè®°å½•çš„ dirty card æ¥æ›´æ–° RSet
         [Processed Buffers: Min: 0, Avg: 0.2, Max: 1, Diff: 1, Sum: 1]
      //åœ¨æ”¶é›†å½“å‰ CSet ä¹‹å‰ï¼Œè€ƒè™‘åˆ°åˆ†åŒºå¤–çš„å¼•ç”¨ï¼Œå¿…é¡»æ‰«æ CSet åˆ†åŒºçš„ RSetã€‚
      [Scan RS (ms): Min: 0.0, Avg: 0.1, Max: 0.1, Diff: 0.1, Sum: 0.3]
      //æ‰«æ JVM ç¼–è¯‘åä»£ç ï¼ˆNative Methodï¼‰çš„å¼•ç”¨ä¿¡æ¯
      [Code Root Scanning (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]
      //å¯¹è±¡æ‹·è´ï¼Œæ‰§è¡ŒCSet åˆ†åŒºå­˜æ´»å¯¹è±¡çš„è½¬ç§»ã€CSet åˆ†åŒºç©ºé—´çš„å›æ”¶
      [Object Copy (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.1]
      //å®Œæˆä¸Šè¿°ä»»åŠ¡åï¼Œå¦‚æœä»»åŠ¡é˜Ÿåˆ—å·²ç©ºï¼Œåˆ™å·¥ä½œçº¿ç¨‹ä¼šå‘èµ·ç»ˆæ­¢è¦æ±‚ã€‚
      [Termination (ms): Min: 0.0, Avg: 0.2, Max: 0.3, Diff: 0.3, Sum: 0.7]
         [Termination Attempts: Min: 1, Avg: 1.0, Max: 1, Diff: 0, Sum: 4]
      [GC Worker Other (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.1]
      [GC Worker Total (ms): Min: 0.1, Avg: 0.4, Max: 0.6, Diff: 0.6, Sum: 1.8]
      [GC Worker End (ms): Min: 3378.7, Avg: 3378.7, Max: 3378.8, Diff: 0.1]
    //å¯¹è±¡æ‹·è´åï¼Œå¼•ç”¨æœ‰æ‰€å˜åŒ–ã€‚æ­¤å¤„ï¼ŒæŠŠåµŒåœ¨ä»£ç é‡Œçš„å¼•ç”¨ä¿®æ­£åˆ°evacuateä¹‹åæ–°å¯¹è±¡çš„ä½ç½®
   [Code Root Fixup: 0.0 ms]
   //æŠŠä¸å†å¼•ç”¨æŸä¸ªregionçš„nmethodä»RSeté‡Œè®°å½•çš„code rootsæ¸…é™¤æ‰çš„åŠ¨ä½œ
   [Code Root Purge: 0.0 ms]
   //åœ¨ä»»æ„æ”¶é›†å‘¨æœŸä¼šæ‰«æ CSet ä¸ RSet è®°å½•çš„ PRT(per region table)ï¼Œæ‰«ææ—¶ä¼šåœ¨å…¨å±€å¡ç‰‡è¡¨ä¸­è¿›è¡Œæ ‡è®°ï¼Œé˜²æ­¢é‡å¤æ‰«æã€‚åœ¨æ”¶é›†å‘¨æœŸçš„æœ€åå°†ä¼šæ¸…é™¤å…¨å±€å¡ç‰‡è¡¨ä¸­çš„å·²æ‰«ææ ‡å¿—ã€‚
   [Clear CT: 0.1 ms]
   [Other: 0.7 ms]
      //ä¸»è¦ç”¨äºå¹¶å‘æ ‡è®°å‘¨æœŸåçš„å¹´è½»ä»£æ”¶é›†ã€ä»¥åŠæ··åˆæ”¶é›†ä¸­ï¼Œåœ¨è¿™äº›æ”¶é›†è¿‡ç¨‹ä¸­ï¼Œç”±äºæœ‰è€å¹´ä»£å€™é€‰åˆ†åŒºçš„åŠ å…¥ï¼Œå¾€å¾€éœ€è¦å¯¹ä¸‹æ¬¡æ”¶é›†çš„èŒƒå›´åšå‡ºç•Œå®šï¼›ä½†å•çº¯çš„å¹´è½»ä»£æ”¶é›†ä¸­ï¼Œæ‰€æœ‰æ”¶é›†çš„åˆ†åŒºéƒ½ä¼šè¢«æ”¶é›†ï¼Œä¸å­˜åœ¨é€‰æ‹©ã€‚
      [Choose CSet: 0.0 ms]
      [Ref Proc: 0.5 ms]
      [Ref Enq: 0.0 ms]
      [Redirty Cards: 0.1 ms]
      [Humongous Register: 0.0 ms]
      [Humongous Reclaim: 0.1 ms]
      [Free CSet: 0.1 ms]
   [Eden: 304.0M(304.0M)->0.0B(304.0M) Survivors: 2048.0K->2048.0K Heap: 304.5M(512.0M)->529.0K(512.0M)]
    [Times: user=0.01 sys=0.00, real=0.00 secs] 
    ```

    Mixed GC æ—¥å¿—åˆ†æ(è¿‡ç¨‹ä¸ YGC å®Œå…¨ä¸€è‡´ï¼Œåªæ˜¯èŒƒå›´ä¸ä¸€è‡´)

    ```java
    29.268: [GC pause (G1 Evacuation Pause) (mixed), 0.0059011 secs]
   [Parallel Time: 5.6 ms, GC Workers: 4]
      ... ...
   [Code Root Fixup: 0.0 ms]
   [Code Root Purge: 0.0 ms]
   [Clear CT: 0.1 ms]
   [Other: 0.3 ms]
      ... ...
   [Eden: 14.0M(14.0M)->0.0B(156.0M) Survivors: 10.0M->4096.0K Heap: 165.9M(512.0M)->148.7M(512.0M)]
    [Times: user=0.02 sys=0.01, real=0.00 secs] 
    ```

    Concurrent marking cycle å¹¶å‘æ ‡è®°å‘¨æœŸ

    ```java
    //è¿™ä¸€è¡Œæ—¥å¿—æ˜¯å…¨å±€å¹¶å‘æ ‡è®°çš„ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œå³åˆå§‹åŒ–æ ‡è®°ï¼Œæ˜¯ä¼´éšYGCä¸€èµ·å‘ç”Ÿçš„ï¼Œåé¢çš„857M->617Mè¡¨ç¤ºYGCå‘ç”Ÿå‰åå †å†…å­˜å˜åŒ–ï¼Œ0.0112237è¡¨ç¤ºYGCçš„è€—æ—¶
    [GC pause (G1 Evacuation Pause) (young) (initial-mark) 857M->617M(1024M), 0.0112237 secs]
    //å¼€å§‹å¹¶å‘ROOTåŒºåŸŸæ‰«æã€‚æ‰«æçš„ Suvivor åˆ†åŒºä¹Ÿè¢«ç§°ä¸ºæ ¹åˆ†åŒºï¼ˆRoot Regionï¼‰
    [GC concurrent-root-region-scan-start]
    //ç»“æŸå¹¶å‘ROOTåŒºåŸŸæ‰«æï¼Œå¹¶ç»Ÿè®¡è¿™ä¸ªé˜¶æ®µçš„è€—æ—¶
    [GC concurrent-root-region-scan-end, 0.0000525 secs]
    [GC concurrent-mark-start]
    [GC concurrent-mark-end, 0.0083864 secs]
    //æœ€ç»ˆæ ‡è®°é˜¶æ®µå®Œæˆå¹¶å‘æ ‡è®°é˜¶æ®µåé—ç•™çš„å·¥ä½œï¼Œå³SATB bufferå¤„ç†ï¼Œå¹¶ç»Ÿè®¡è¿™ä¸ªé˜¶æ®µè€—æ—¶
    [GC remark, 0.0038066 secs]
    //æ¸…ç†é˜¶æ®µä¼šæ ¹æ®æ‰€æœ‰Regionæ ‡è®°ä¿¡æ¯ï¼Œè®¡ç®—å‡ºæ¯ä¸ªRegionå­˜æ´»å¯¹è±¡ä¿¡æ¯ï¼Œå¹¶ä¸”æŠŠRegionæ ¹æ®GCå›æ”¶æ•ˆç‡æ’åº
    [GC cleanup 680M->680M(1024M), 0.0006165 secs]
    ```
### ZGC

- [ZGC è¯»å±éšœè¿‡ç¨‹](https://zhuanlan.zhihu.com/p/43608166)

    é€šè¿‡æŸ“è‰²æŒ‡é’ˆæŠ€æœ¯å’Œè¯»å±éšœï¼Œä½¿å¾—ç”¨æˆ·çº¿ç¨‹åœ¨è¯»å¯¹è±¡æ—¶èƒ½å¤Ÿæ€»æ˜¯è¯»å–åˆ°å¯¹è±¡æœ€æ–°çš„å¼•ç”¨ã€‚

- [Full GC æ—¶æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›†æ–¹å¼](https://www.zhihu.com/question/62604570/answer/201129934)

    CMS ä¹‹å‰çš„åƒåœ¾æ”¶é›†å™¨å¹¶ä¸èƒ½å•ç‹¬æ”¶é›†è€å¹´ä»£ï¼ŒFull GC å¯¹æ•´ä¸ªå †ä½¿ç”¨ `MSC(Mark-Sweep-Compact)` ç®—æ³•ã€‚

- [Major GC å’Œ Full GC çš„åŒºåˆ«](https://www.zhihu.com/question/41922036/answer/93079526)

- [ParallelScavenge çš„ fullGC](https://www.zhihu.com/question/48780091/answer/113063216)

- [GCLocker-initiated young GC å¤šä½™å‘ç”Ÿ](https://www.jianshu.com/p/ecc57a81f73c)

## å…ƒç©ºé—´

- [metaspace å…ƒç©ºé—´ç‰¹å¾](https://stackoverflow.com/questions/18339707/permgen-elimination-in-jdk-8)

- [metaspace å…ƒç©ºé—´å­˜å‚¨å†…å®¹](https://www.jianshu.com/p/a6f19189ec62)

- [metaspace ä¸ DirectByteBuffer å¹¶æ— å…³ç³»](https://www.zhihu.com/question/399007267/answer/1260691185)

- [JDKçš„è¿è¡Œæ—¶å¸¸é‡æ± ã€å­—ç¬¦ä¸²å¸¸é‡æ± ã€é™æ€å¸¸é‡æ± å‚¨å­˜ä½ç½®](https://zhuanlan.zhihu.com/p/206852587)['](https://blog.csdn.net/weixin_43232955/article/details/107411378)

    JDK 8 èµ·ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± å’Œç±»çš„é™æ€å˜é‡è¿˜æ˜¯å­˜å‚¨åœ¨å †ä¸­ã€‚ç±»çš„ç±»å‹ã€æˆå‘˜å˜é‡ã€æ–¹æ³•ä¿¡æ¯ï¼Œå’Œè¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆåŒ…æ‹¬ï¼ŒJIT ä»£ç ç¼“å­˜å’Œç±»é™æ€å¸¸é‡æ± ä¸­çš„æ•°æ®ï¼‰å­˜å‚¨åœ¨å…ƒç©ºé—´ä¸­ã€‚

## å­—èŠ‚ç æ“ä½œ

- [ç†è§£å­—èŠ‚ç å¢å¼ºå·¥å…·åŒ… Instrumentation ](https://www.throwable.club/2019/06/29/java-understand-instrument-first/)

    åŒ…æ‹¬ `premain` å’Œ `agentmain` çš„ä½¿ç”¨

- [Java å­—èŠ‚ç å¢å¼ºæŠ€æœ¯](https://tech.meituan.com/2019/09/05/java-bytecode-enhancement.html)

## JVM è°ƒä¼˜

- [jmap æŒ‡ä»¤æ…ç”¨](https://blog.csdn.net/seeJavaDocs/article/details/53643227)

# åˆ†å¸ƒå¼

## åˆ†å¸ƒå¼ç®—æ³•

- [æ‹œå åº­å°†å†›é—®é¢˜å’ŒFLPçš„å¯ç¤º
](https://www.jianshu.com/p/b620cbabf857)

- [å¦‚ä½•è§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„â€œå¹½çµå¤ç°â€?](https://developer.aliyun.com/article/749236?utm_content=g_1000107462)['](https://zhuanlan.zhihu.com/p/112681511)

    > ä»æœåŠ¡ç«¯æ¥çœ‹â€œå¹½çµå¤ç°â€é—®é¢˜ï¼Œå°±æ˜¯åœ¨failoveræƒ…å†µä¸‹ï¼Œæ–°çš„leaderä¸æ¸…æ¥šå½“å‰çš„committed indexï¼Œä¹Ÿå°±æ˜¯åˆ†ä¸æ¸…log entryæ˜¯committedçŠ¶æ€è¿˜æ˜¯æœªcommittedçŠ¶æ€ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ä¸€å®šçš„æ—¥å¿—æ¢å¤æ‰‹æ®µï¼Œä¿è¯å·²ç»æäº¤çš„æ—¥å¿—ä¸ä¼šè¢«ä¸¢æ‰ï¼ˆæœ€å¤§ commit åŸåˆ™ï¼‰ï¼Œå¹¶ä¸”é€šè¿‡ä¸€ä¸ªåˆ†ç•Œçº¿ï¼ˆå¦‚MultiPaxosçš„StartWorkingï¼ŒRaftçš„noopï¼ŒZabçš„CurrentEpochï¼‰æ¥å†³å®šæ—¥å¿—å°†ä¼šè¢«commitè¿˜æ˜¯è¢«dropï¼Œä»è€Œé¿å…æ¨¡ç³Šä¸ä¸€çš„çŠ¶æ€ã€‚

    ä¸ºä»€ä¹ˆæœªæäº¤çš„ log éœ€è¦ä¸¢å¼ƒï¼Ÿä»€ä¹ˆæ—¶å€™æœªæäº¤çš„ log éœ€è¦ä¸¢å¼ƒï¼Ÿ

    é—´éš”äº†ä¸€ä¸ªä»»æœŸçš„æœªæäº¤çš„ log éœ€è¦å¿…é¡»ä¸¢å¼ƒã€‚æœ¬è´¨ä¸Šï¼Œæ¯å½“ä¸€ä»» leader å½“é€‰åï¼Œä¾¿ä¼šä¸ºå®¢æˆ·ç«¯å±•ç¤ºä¸€ä»½ä¸€è‡´çš„è§†å›¾ï¼Œæ­¤æ—¶ä¸å­˜åœ¨çš„ log ä¸èƒ½æ— ç«¯å†æ¬¡å‡ºç°ã€‚

    zab å’Œ raft é€šè¿‡åœ¨æ¯æ¬¡é€‰ä¸¾æˆåŠŸåï¼ŒæŒä¹…åŒ–å½“å‰ä»»æœŸæ¥ä¿è¯ï¼Œæ–°çš„ leader å¿…é¡»åœ¨å½“å‰ leader è§†å›¾çš„åŸºç¡€ä¸Šè¿›è¡Œæ–°çš„ææ¡ˆçš„è¯»å†™ã€‚

### Paxos

- [PaxosåŸç†ã€å†ç¨‹åŠå®æˆ˜](https://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&mid=403582309&idx=1&sn=80c006f4e84a8af35dc8e9654f018ace&scene=1&srcid=0119gtt2MOru0Jz4DHA3Rzqy&key=710a5d99946419d927f6d5cd845dc9a72ff3d652a8e66f0ddf87d91262fd262f61f63660690d2d5da76a44a29e155610&ascene=0&uin=MjA1MDk3Njk1&devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.11.1+build(15B42)&version=11020201&pass_ticket=bhstP11nRHvorVXvQ4pt9fzB9Vdzj5sSRBe84783gsg%3D)

- [paxosç®—æ³•ä¸­ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªå€¼è¢«Acceptäº†ï¼Œå…¶ä¸­ä¸€ä¸ªå½¢æˆäº†å¤šæ•°æ´¾ï¼Œå¦å¤–ä¸€ä¸ªå€¼æ€ä¹ˆå¤„ç†ï¼Ÿ](https://www.zhihu.com/question/57947049/answer/155030335)

### Raft

- [Raft è®ºæ–‡ç¿»è¯‘](https://github.com/maemual/raft-zh_cn/blob/master/raft-zh_cn.md)

- [Raft å¦‚ä½•å¤„ç†ä¸Šä¸€ä»»æœªæäº¤çš„çš„ log](https://zhuanlan.zhihu.com/p/268299972)['](https://zhuanlan.zhihu.com/p/39105353)

    raft ä¸ç›´æ¥å¤„ç†ä¸Šä¸€ä»»æœªæäº¤çš„ logï¼Œå½“é€‰ä¸¾æˆåŠŸåï¼Œleader å‘é€ noop çš„ä¸€æ¡ log(è¿™æ¡æ—¥å¿—é‡Œçš„ term å°†æ˜¯è¯¥ä»»æœŸï¼Œä¹Ÿå°±æ˜¯æœ€æ–°çš„ term)ï¼ŒæŒ‰ç…§åè®®ï¼Œfollower å½“å‰çš„æ—¥å¿—å¦‚æœä¸èƒ½ä¸ noop è¿™æ¡æ—¥å¿—åŒ¹é…ï¼ˆindex ä¸ leader ä¸€è‡´æ‰èƒ½åŒ¹é…ï¼‰çš„è¯ï¼Œåˆ™è¿”å›æ‹’ç»ã€‚leader å°†ä¼šå›é€€ nextIndexï¼Œç„¶åé‡è¯• AppendEntries è¯·æ±‚ï¼Œç›´åˆ° follower è¿½ä¸Šè¿›åº¦ï¼Œæ¥å—äº† noop è¿™æ¡logï¼Œæ‰ä¼šå‘ leader è¿”å›ç¡®è®¤ã€‚

    æ­¤æ—¶ï¼Œleader çš„ noop log å¦‚æœæ”¶åˆ°äº†å¤§å¤šæ•° follower çš„ç¡®è®¤åï¼Œleader èŠ‚ç‚¹ä¸­ä¸Šä¸€ä»»çš„ log ä¾¿å·²ç»è¢«æäº¤äº†ã€‚

    å½“æ–°çš„ä»»æœŸä¸­ï¼Œæœ‰ä¸€æ¡è¯¥ä»»æœŸçš„ log entry è¢«å¤šæ•° follower æ¥å—åï¼Œä»¥å‰çš„ä¸ºæäº¤çš„ log æ‰ç®—æ˜¯çœŸæ­£æäº¤äº†ã€‚

- [Raft æˆå‘˜å˜æ›´](https://zhuanlan.zhihu.com/p/32052223)

- [å®¢æˆ·ç«¯åªè¯»è¯·æ±‚çš„å¤„ç†](https://zhuanlan.zhihu.com/p/36592467)

- [raft æµ‹éªŒ](https://ongardie.net/static/raft/userstudy/quizzes.html)

### BFT

- [PBFT ç®—æ³•å„é˜¶æ®µæ¶ˆæ¯å‘é€æ•°é‡è¯æ˜](https://zhuanlan.zhihu.com/p/53897982)

## åˆ†å¸ƒå¼é”

### Redis åˆ†å¸ƒå¼é”

- [åŸºäºRedisçš„åˆ†å¸ƒå¼é”åˆ°åº•å®‰å…¨å—?](https://www.jianshu.com/p/dd66bdd18a56)

- [Redission å®ç°](https://www.jianshu.com/p/f302aa345ca8)

    ä¸ºäº†é˜²æ­¢ç”¨æˆ·åŠ é”åï¼Œè§£é”å¤±è´¥ï¼Œå¯¼è‡´å…¶ä½™å®¢æˆ·ç«¯æ— æ³•ç»§ç»­è·å–é”ï¼Œæ‰€ä»¥éœ€è¦ç»™åˆ†å¸ƒå¼é”ä¸€ä¸ªè¿‡æœŸæ—¶é™ï¼Œä¿è¯è§£é”å¤±è´¥åï¼Œé”èƒ½è¿‡æœŸè‡ªåŠ¨é‡Šæ”¾ã€‚
    
    è¿™æ˜¯ä¸€ç§å…¸å‹çš„[ç§Ÿçº¦æœºåˆ¶](https://zhuanlan.zhihu.com/p/101913195)ã€‚

    > é”çš„å¤±æ•ˆæ—¶é—´è®¾ç½®æ˜¯ä¸ªçº ç»“çš„é—®é¢˜ã€‚å½“ç”¨æˆ·å¹¶ä¸çŸ¥é“è‡ªå·±å°†ä¼šç”¨å¤šä¹…çš„é”æ—¶ï¼Œæˆ‘ä»¬ä¸ºè¯¥é”è®¾ç½®ä¸€ä¸ªè¾ƒå°çš„ç§ŸæœŸï¼ŒåŒæ—¶æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œåœ¨è¯¥é”è¿‡æœŸä¹‹å‰ï¼Œè‡ªåŠ¨ç»­ç§Ÿã€‚ç”¨æˆ·è·å¾—é”åï¼Œå¯ä»¥å¯åŠ¨ä¸€ä¸ªåå°çº¿ç¨‹ï¼Œå‘¨æœŸæ€§æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦è¿˜æŒæœ‰é”ï¼ŒæŒæœ‰åˆ™ç»­æœŸã€‚

## åˆ†å¸ƒå¼äº‹åŠ¡

- [äºŒé˜¶æ®µæäº¤åè®®](https://mp.weixin.qq.com/s/Ixurn9kUBhnVZjrWxVpBTg)

    2PC å­˜åœ¨å•ç‚¹æ•…éšœï¼Œå½“åè°ƒè€…åœ¨æäº¤é˜¶æ®µå¼€å§‹æ—¶å®•æœºï¼Œå‚ä¸è€…å°†è¢«æ— é™æœŸé˜»å¡ã€‚

    ä¸ºäº†è§£å†³è¿™ä¸ªåŒæ­¥é˜»å¡çš„é—®é¢˜ï¼Œ3PC åœ¨å‚ä¸è€…ä¸­ä¹Ÿå¼•å…¥äº†è¶…æ—¶æœºåˆ¶â€”â€”è¶…æ—¶æœªæ”¶åˆ° doCommit æ¶ˆæ¯ï¼Œä¾¿è‡ªåŠ¨æäº¤ã€‚å¦‚æ­¤å®šä¼šæœ‰ä¸€è‡´æ€§é—®é¢˜å‡ºç°ï¼Œæ‰€ä»¥ 3PC åˆå¤šåŠ äº†ä¸€ä¸ª canCommit é˜¶æ®µï¼Œå½“æ”¹é˜¶æ®µç¡®è®¤é€šè¿‡åï¼Œåç»­å¤±è´¥çš„æ¦‚ç‡ä¼šé™ä½ï¼Œä»¥æ­¤é€šè¿‡ç‰ºç‰²ä¸€å®šçš„ä¸€è‡´æ€§ï¼Œæé«˜äº†å¯ç”¨æ€§ã€‚

    2PC è¿™ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡åè®®é€šå¸¸æ˜¯åœ¨ DB å±‚é¢å®ç°ï¼ŒTCC åˆ™ç›¸å½“äºåº”ç”¨å±‚é¢çš„ 2PCï¼Œé€šè¿‡ä¸šåŠ¡é€»è¾‘å®ç°ï¼Œèƒ½å¤Ÿå…è®¸ç¨‹åºè‡ªå®šä¹‰æ•°æ®åº“æ“ä½œç²’åº¦ã€‚

# MySQL 

[æ•°æ®åº“ä¸‰èŒƒå¼ä¸åèŒƒå¼](https://zhuanlan.zhihu.com/p/77771583)

- ç¬¬ä¸€èŒƒå¼ï¼šå±æ€§ä¸å¯å†åˆ†

    å¦‚è‹¥æŸåˆ—åŒ…å«ä¸¤ä¸ªå±æ€§ï¼Œç±»ä¼¼å•†å“å’Œä»·æ ¼ï¼Œé‚£ä¹ˆé’ˆå¯¹ä»·æ ¼è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œå…¶ä¸­æŸä¸€ä¸ªå±æ€§ä¸å…¶å®ƒå±æ€§è¿›è¡Œè”åˆç´¢å¼•æ—¶ï¼Œéƒ½æ˜¯ä¸å¤Ÿç®€æ´æ˜æ™°çš„ã€‚

- ç¬¬äºŒèŒƒå¼ï¼šæ¶ˆé™¤éƒ¨åˆ†ä¾èµ–

    (å­¦å·, è¯¾ç¨‹åç§°) â†’ (å§“å, å¹´é¾„, æˆç»©, å­¦åˆ†)

    ä»¥ğŸ‘†ä¸ºä¾‹ï¼Œå­¦å·å’Œè¯¾ç¨‹ï¼Œèƒ½å¤Ÿå”¯ä¸€å®šä½åˆ°å­¦ç”Ÿæˆç»©ã€‚å§“åä»…ä¾èµ–å­¦å·ï¼Œå­¦åˆ†ä»…ä¾èµ–è¯¾ç¨‹ï¼Œæœ¬æ¥ä¸€æ¡(è¯¾ç¨‹)->(å­¦åˆ†)å°±èƒ½å¤Ÿä»£è¡¨çš„å…³ç³»ï¼Œç°åœ¨å´å†—ä½™äº†å¤šä»½ã€‚

- ç¬¬ä¸‰èŒƒå¼ï¼šæ¶ˆé™¤ä¼ é€’ä¾èµ–

    (å­¦å·) â†’ (å§“å, å¹´é¾„, æ‰€åœ¨å­¦é™¢, å­¦é™¢åœ°ç‚¹, å­¦é™¢ç”µè¯)

    ä»¥ğŸ‘†ä¸ºä¾‹ï¼Œå­¦å·å†³å®šå­¦ç”Ÿçš„å­¦é™¢ï¼Œå­¦é™¢å†³å®šå­¦é™¢ç”µè¯ï¼Œæœ¬æ¥ä¸€æ¡(å­¦é™¢)->(å­¦é™¢ç”µè¯)å°±èƒ½è¡¨ç¤ºçš„å…³ç³»ï¼Œç°åœ¨å†—ä½™äº†å¤šä»½ã€‚

æ»¡è¶³ä¸‰èŒƒå¼çš„æ•°æ®åº“è®¾è®¡ï¼Œèƒ½å¤Ÿæœ€å¤§ç¨‹åº¦çš„ä¿è¯æ•°æ®åº“æ•°æ®ç®€æ´æ— å†—ä½™ï¼Œå¯ä»¥æŒ‰ç‹¬ç«‹çš„å­—æ®µæ£€ç´¢æŸ¥è¯¢ã€‚

ä½†æŒ‰ç…§èŒƒå¼è®¾è®¡å‡ºæ¥çš„è¡¨ï¼Œç¬¬ä¸€ï¼Œåœ¨è§£å†³æ•°æ®å†—ä½™çš„åŒæ—¶ï¼Œä¼šç”Ÿæˆè®¸å¤šè¡¨ï¼Œå¯¼è‡´äº†è¡¨æ•°é‡çš„å¤æ‚æ€§ã€‚ç¬¬äºŒï¼ŒæŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼Œå¤šè¡¨æŸ¥è¯¢çš„æ—¶é—´è¿œè¿œé«˜äºå•è¡¨æŸ¥è¯¢çš„æ—¶é—´ã€‚

å…·ä½“åœºæ™¯å…·ä½“åˆ†æï¼ŒåèŒƒå¼çš„è®¾è®¡è®¤ä¸ºï¼Œä¸€å®šçš„å†—ä½™ï¼Œèƒ½å¤Ÿæé«˜æ€§èƒ½ã€‚

## æŸ¥è¯¢è¯­å¥

- [INSERT ... ON DUPLICATE KEY UPDATEäº§ç”Ÿdeath lockæ­»é”åŸç†](https://blog.csdn.net/pml18710973036/article/details/78452688)

    åŒæ—¶æŒæœ‰äº† S é”å’Œ X é”ã€‚

- [åˆ©ç”¨ `sum()` ç»Ÿè®¡åˆ—ä¸­æŸä¸ªå€¼çš„æ•°ç›®](https://blog.csdn.net/lavorange/article/details/25004181)

    sum() ç»Ÿè®¡æ—¶å¯ä»¥æ·»åŠ æ¡ä»¶

- [MySQL ç»„å†…æ’åº: åˆ†ç»„æŸ¥è¯¢æ¯ç»„çš„å‰næ¡è®°å½•](https://www.jianshu.com/p/717c4bdad462)

- [optimizer trace è¯¦è§£](http://blog.itpub.net/28218939/viewspace-2658978/)

- [ç´¢å¼• JSON å­—æ®µ](https://developer.aliyun.com/article/303208)

    åœ¨MySQL 5.7ä¸­ï¼Œæ”¯æŒä¸¤ç§ Generated Columnï¼Œå³ Virtual Generated Column å’Œ Stored Generated Columnï¼Œå‰è€…åªå°† Generated Column ä¿å­˜åœ¨æ•°æ®å­—å…¸ä¸­ï¼ˆè¡¨çš„å…ƒæ•°æ®ï¼‰ï¼Œå¹¶ä¸ä¼šå°†è¿™ä¸€åˆ—æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼›åè€…ä¼šå°† Generated Column æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼Œè€Œä¸æ˜¯æ¯æ¬¡è¯»å–çš„æ—¶å€™è®¡ç®—æ‰€å¾—ã€‚

- [JSON å­—æ®µä½¿ç”¨åœºæ™¯](https://juejin.cn/post/6844903737308381198#heading-1)

    å¯¹äºæ•°æ®ç»“æ„å®¹æ˜“å˜åŒ–ï¼Œæ•°æ®è¡¨ä¸­ä»…æœ‰å°‘éƒ¨åˆ†è®°å½•éœ€è¦çš„æ•°æ®ã€‚

- [åˆ†åº“åˆ†è¡¨åï¼Œè·¨åº“åˆ†é¡µæŸ¥è¯¢æ–¹æ¡ˆ](https://blog.csdn.net/uiuan00/article/details/102716457)

## åŸºæœ¬åŸç†

- [æ•°æ®åº“äº‹åŠ¡ä¸­çš„ä¸€è‡´æ€§](https://www.zhihu.com/question/31346392)

- [Innodb åŒå†™é˜²æ­¢ `partial page write`](https://blog.csdn.net/jolly10/article/details/79791574)

- [ICP(Index Condition Pushdown) ç´¢å¼•ä¸‹æ¨](https://database.51cto.com/art/201907/599968.htm)

    é’ˆå¯¹è¾…åŠ©ç´¢å¼•èƒ½è¦†ç›–åˆ°çš„åˆ—ï¼Œå°† where æ¡ä»¶çš„åˆ¤æ–­ä¸‹æ¨åˆ°å­˜å‚¨å¼•æ“å±‚ã€‚ä¹Ÿå°±æ˜¯ï¼Œè¦†ç›–ç´¢å¼•ä¸­ï¼Œæœ¬æ¥ä½¿ç”¨ä¸åˆ°ç´¢å¼•çš„è¿‡æ»¤æ¡ä»¶ï¼Œåœ¨å›è¡¨å‰æå‰å®Œæˆäº†è¿‡æ»¤ï¼Œå³ä¸ºç´¢å¼•æ¡ä»¶ä¸‹æ¨ã€‚

- [Mysql æ„å‘é”](https://blog.csdn.net/zcl_love_wx/article/details/82015281)

    æ„å‘é”æ˜¯è¡¨çº§é”ï¼Œç”³è¯·è¡Œçº§é”æ—¶ï¼Œç”±æ•°æ®åº“è‡ªåŠ¨æå‰ç”³è¯·ï¼Œä¿è¯äº†è¡Œçº§é”ä¸è¡¨çº§é”çš„å…±å­˜ã€‚

- [in å’Œ exist åŒºåˆ«](https://blog.csdn.net/wqc19920906/article/details/79800374)

    in ä¼šç¼“å­˜è¡¨è¾¾å¼ä¸­çš„æ•°æ®ï¼Œæ˜¯åœ¨å†…å­˜ä¸­æ“ä½œï¼Œä½†éœ€è¦éå† B è¡¨ã€‚
    exist ä¸ä¼šç¼“å­˜æ•°æ®ï¼Œä½†å¯¹äº A ä¸­çš„æ¯ä¸€æ¡æ•°æ®å¹¶ä¸éœ€è¦éå† B è¡¨ã€‚

    in å­æŸ¥è¯¢å¯ä»¥ä¼˜åŒ–ä¸ºåŠè¿æ¥ã€‚ä¾‹å¦‚ï¼Œç‰©åŒ–è¡¨æ—¶ï¼Œå†…è¿æ¥å¯è‡ªåŠ¨ä¼˜åŒ–å·¦å³è¿æ¥ã€‚è€Œä¸”ï¼Œæ€»èƒ½è½¬æ¢ä¸º exist è¯­å¥ã€‚

- [channge buffer](https://dev.mysql.com/doc/refman/8.0/en/innodb-change-buffer.html)

    åœ¨å†…å­˜ä¸­ï¼Œ`channge buffer` å ç”¨äº†ç¼“å†²æ± çš„ä¸€éƒ¨åˆ†ã€‚åœ¨ç£ç›˜ä¸Šï¼Œ`channge buffer` æ˜¯ç³»ç»Ÿè¡¨ç©ºé—´çš„ä¸€éƒ¨åˆ†ï¼Œå½“æ•°æ®åº“æœåŠ¡å™¨å…³é—­æ—¶ï¼Œå¯¹è¾…åŠ©ç´¢å¼•çš„æ›´æ”¹å°†å­˜å‚¨åœ¨å…¶ä¸­ã€‚

- [LSN](https://www.cnblogs.com/drizzle-xu/p/9713378.html)

    ç³»ç»Ÿæœ€å¤§ LSN > redo æ—¥å¿—ä¸­çš„ > è„é¡µä¸­çš„ > checkpoint ä¸­çš„

- [ä¸»ä»åˆ†ç¦»ï¼Œä»åº“åŒæ ·æœ‰è¯»å†™çš„è´Ÿè·ä¸ºä»€ä¹ˆä¼šæå‡æ€§èƒ½?](https://zhuanlan.zhihu.com/p/34782828)

- [è‡ªå¢ ID å¯¼è‡´ä¸»ä»ä¸ä¸€è‡´](https://blog.csdn.net/Saintyyu/article/details/104330881)

- [æ°´å¹³åˆ†åº“æ‰©å±•](https://www.cnblogs.com/barrywxx/p/11532122.html)

    æˆå€æ‰©å®¹ï¼Œæå‰åŒå†™ã€‚

- [åˆ†åº“åˆ†è¡¨ï¼Œäº‹åŠ¡é—®é¢˜è§£å†³æ–¹æ¡ˆ](https://mp.weixin.qq.com/s/lgxP0mzwwrV05aUmYb7hJA)['](https://mp.weixin.qq.com/s/9G-_U6di0wgawJXKeVCM-w)

## innodb å­˜å‚¨å¼•æ“âœ¨

- ç‹¬ç«‹è¡¨ç©ºé—´çš„ç‰©ç†ç»“æ„

    è¡¨ç©ºé—´ç”±åŒºæ„æˆï¼Œæ¯256ä¸ªåŒºç»„æˆä¸€ä¸ªç»„ï¼Œæ®µæ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µï¼Œæ¯ä¸ªåŒºåŒ…å«64ä¸ªé¡µã€‚

    æ¯ä¸ªç´¢å¼•åŒ…å«ä¸¤ä¸ªæ®µï¼Œå¶å­æ®µå’Œéå¶å­æ®µã€‚æ®µç”±åŒºçš„é“¾è¡¨æ„æˆï¼Œç”±å…ƒæ•°æ®ç»“æ„ INODE Entry æè¿°ï¼Œè¯¥ç»“æ„æŒæœ‰é“¾è¡¨çš„èµ·å§‹èŠ‚ç‚¹ä»¥åŠæ®µä¸­ä½äºç¢ç‰‡åŒºçš„é¡µçš„å®šä½ã€‚

    æ®µçš„å…ƒæ•°æ®ç»“æ„ INODE Entry ç»Ÿä¸€å­˜å‚¨äºè¡¨ç©ºé—´ç¬¬ä¸€ä¸ªåŒºçš„ç¬¬ä¸‰ä¸ªé¡µé¢ï¼Œè¯¥é¡µé¢ç±»å‹ä¸º INODE ç±»å‹ï¼Œå¤šä¸ªæ­¤ç±»é¡µé¢ç”±é“¾è¡¨ç›¸è¿æ¥ã€‚

    æ¯ä¸ªç»„çš„ç¬¬ä¸€ä¸ªåŒºçš„ç¬¬ä¸€ä¸ªé¡µä¸­ï¼Œå­˜å‚¨äº†è¯¥ç»„å†… 256 ä¸ªåŒºå¯¹åº”çš„å…ƒæ•°æ®ç»“æ„ XDES Entryï¼Œæ¯ä¸ª XDES Entry ä¸­æœ‰æ¯ä¸ªåŒºå†… 64 ä¸ªé¡µæ˜¯å¦ç©ºé—²çš„ bitmapã€‚

    æ¯ä¸ªç´¢å¼•ä¸¤ä¸ªæ®µï¼Œç´¢å¼•çš„æ ¹é¡µé¢çš„ Page Header éƒ¨åˆ†çš„ä¸¤ä¸ª Segment Header ç»“æ„å­˜å‚¨äº†æŒ‡å‘è¯¥ç´¢å¼•ä¸¤ä¸ªæ®µçš„æŒ‡é’ˆã€‚å¦ï¼Œåœ¨ç³»ç»Ÿè¡¨ç©ºé—´ç¬¬ä¸€ä¸ªåŒºçš„ç¬¬ä¸ƒä¸ªé¡µ Data Directory Header ä¸­ï¼Œå­˜å‚¨äº†å„ä¸ªç´¢å¼•çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…å«äº†ç´¢å¼•çš„æ ¹é¡µé¢ä½ç½®ã€‚

    å› æ­¤ï¼Œä»æ•°æ®å­—å…¸çš„ç´¢å¼•è¡¨ä¸­ï¼Œæ‰¾åˆ°ç´¢å¼•æ ¹é¡µé¢çš„ä½ç½®ï¼Œç„¶åå¾—åˆ°ç´¢å¼•ä¸¤ä¸ªæ®µçš„ INODE Entry çš„ä½ç½®ï¼Œç„¶åå¯ä»¥å¯»å¾—è¯¥æ®µå†…æ‰€æœ‰åŒºæˆ–è€…é›¶ç¢é¡µã€‚

- in å­æŸ¥è¯¢è½¬åŒ–ä¸º semi join çš„å®ç°æ–¹æ³•

    1. table pullout å­æŸ¥è¯¢è¡¨æœç´¢æ¡ä»¶åªæœ‰ä¸»é”®æˆ–è€…å”¯ä¸€ç´¢å¼•åˆ—æ—¶ï¼Œå› ä¸ºä¸ä¼šå‡ºç°é‡å¤ï¼Œå¯ä»¥ç›´æ¥è½¬ä¸ºå†…è¿æ¥

    2. duplicate weedout å¯¹åŠè¿æ¥åçš„ç»“æœé›†ï¼Œæ„å»ºä¸´æ—¶è¡¨ï¼Œæ¶ˆé™¤é‡å¤
    3. LooseScan å¦‚æœå°†å­æŸ¥è¯¢è¡¨ä½œä¸ºé©±åŠ¨è¡¨ï¼Œä¸”èƒ½å¤Ÿä½¿ç”¨åˆ°è¯¥è¡¨çš„ç´¢å¼•æ—¶ï¼Œå¯ä»¥åªå–ç›¸åŒç´¢å¼•å€¼ç¬¬ä¸€ä¸ªï¼Œç›¸å½“äºåˆ†ç»„ï¼Œç„¶åè¿›è¡Œå†…è¿æ¥
    4. Semi-join Materialization ä¸ºå­æŸ¥è¯¢å»ºç«‹ç‰©ç†è¡¨ï¼Œç„¶åå†…è¿æ¥
    5. FirstMatch å¤–å±‚è¡¨çš„æ¯ä¸€æ¡æ•°æ®ï¼Œä¸å†…å±‚è¡¨è¿›è¡ŒåŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸä¸€æ¬¡ï¼Œä¾¿ä¸å†ä»…éœ€è¿›è¡ŒåŒ¹é…

    > å°†å­æŸ¥è¯¢è½¬æ¢ä¸ºåŠè¿æ¥æˆ–æ˜¯ `Exist` æ¡ä»¶çš„å¥½å¤„æ˜¯ï¼Œå¯èƒ½å¯ä»¥å¸®åŠ©å­æŸ¥è¯¢ä½¿ç”¨åˆ°ç´¢å¼•ã€‚

- [InnoDB recoveryè¿‡ç¨‹è§£æ](https://sq.163yun.com/blog/article/172546631668785152)

- [å´©æºƒæ¢å¤æœºåˆ¶](https://www.zhihu.com/question/287892854/answer/1472244704)

    å½“mysqlé‡å¯è¿›å…¥å´©æºƒæ¢å¤æ—¶,é¦–å…ˆåˆ©ç”¨redoæ¢å¤æ•°æ®åº“çš„æ•´ä½“ä¸€è‡´æ€§,ç„¶åä¼šæ ¹æ®ä¿å­˜binlogæ˜¯å¦å®Œæ•´æ¥å†³å®šäº‹åŠ¡é‡åšæˆ–è€…å›æ»š,å¦‚æœbinlogäº‹åŠ¡æœ¬èº«åŒ…å«commit,åˆ™è¿›è¡Œé‡åš,å¦åˆ™å›æ»š.

- [MySQLæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„](https://zhuanlan.zhihu.com/p/146968292)

- [MVCC æ˜¯å¦è§£å†³äº†å¹»è¯»](https://segmentfault.com/a/1190000020680168)

# ç¼“å­˜

- [æ•°æ®åº“å’Œç¼“å­˜åŒå†™ä¸€è‡´æ€§](https://www.cnblogs.com/rjzheng/p/9041659.html?spm=a2c6h.12873639.0.0.2020fe8dqb3Ls4)

- [ç¼“å­˜æ–¹æ¡ˆ](https://zhuanlan.zhihu.com/p/79944852)

    çƒ­ç‚¹æ•°æ®ç¼“å­˜å‡»ç©¿é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨åŒç¼“å­˜ï¼ˆå¤šçº§ç¼“å­˜ï¼‰ã€‚
    
    å¹¶å‘è¯»å–æ—¶ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹è·å–é”æˆåŠŸï¼Œè´Ÿè´£æ›´æ–°ä¸»ç¼“å­˜ï¼Œåç»­çº¿ç¨‹è¿”å›å‰¯ç¼“å­˜æ•°æ®ã€‚å¹¶å‘å†™å…¥æ—¶ï¼ŒåŠ åˆ†å¸ƒå¼é”ï¼Œæ›´æ–°å‰¯ç¼“å­˜ï¼Œæ›´æ–°å®Œæ¯•ååˆ é™¤ä¸»ç¼“å­˜ã€‚

# å¼€æºæ¡†æ¶

## Spring

- [GenericTypeResolver.resolveTypeArguments(Class<?> clazz, Class<?> genericIfc)](https://stackoverflow.com/questions/34271764/generictyperesolver-resolvetypearguments-returns-null)è·å–ç»§æ‰¿æ³›å‹ç±»çš„å­ç±»çš„æ³›å‹ç±»å‹

    å¯¹äº `AsyncConfigurationSelector` ç±»
    ```java
    public class AsyncConfigurationSelector extends AdviceModeImportSelector<EnableAsync>{
        ...
        public void someMethod(){
            Class<?> annType = GenericTypeResolver.resolveTypeArgument(this.getClass(), AdviceModeImportSelector.class);
            //annType ç±»å‹ä¾¿æ˜¯ç»§æ‰¿çš„çˆ¶ç±»çš„æ³›å‹ç±»å‹
        }
    }
    ```

- [`$$` ä¸ `<generated>` ä»£è¡¨çš„å«ä¹‰](https://stackoverflow.com/questions/33605246/what-does-and-generated-means-in-java-stacktrace)

- [RootBeanDefinitionä¸GenericBeanDefinition](https://www.cnblogs.com/chwy/p/13514589.html)

- [ApplicationContext çš„ç»§æ‰¿ä½“ç³»](https://zhuanlan.zhihu.com/p/210268684)

### æºç è§£æâœ¨

- [`@Configuration` æºç è§£æ](https://mp.weixin.qq.com/s/5UvbeEnZBS7niAJw_f-6pQ) [](https://juejin.im/post/6860387888413343757)

    ç”± `ConfigurationClassPostProcessor` å®Œæˆå¯¹é…ç½®ç±»çš„ä»£ç†æ“ä½œ

    - `postProcessBeanFactory` æ–¹æ³•

        1. åˆ—å‡º `beanFactory` ä¸­è¢« `@Configuration` æ³¨é‡Šçš„ `beanDefinition`
        2. å°†ä¸Šé¢æ¯ä¸€ä¸ª `beanDefinition` çš„ `beanClass` æ›¿æ¢ä¸ºåŸºäº CGlib çš„ä»£ç†ç±»
        3. ä»£ç†ç±»è‡ªå¸¦ä¸¤ä¸ªæ‹¦æˆªå™¨
           -  `new BeanMethodInterceptor()`
                
                ä»£ç† `beanMethod` æ–¹æ³•ï¼Œæ§åˆ¶ bean çš„åˆ›å»ºæˆ–è·å–ã€‚åªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨è°ƒç”¨åŸæ–¹æ³•ï¼Œåç»­ä» `beanFactory` ä¸­è·å– `bean`ã€‚ç”¨é…ç½®ç±»ä¸­çš„ BeanMethod æ—¶ï¼Œå½“å‰æ‰§è¡Œæ–¹æ³•éè°ƒç”¨æ–¹æ³•æ—¶(å¤–å±‚ç¬¬ä¸€å±‚ä¸ºè°ƒç”¨æ–¹æ³•)ï¼Œéœ€è¦è°ƒç”¨beanFactory.getBean()è·å¾—ã€‚

           -  `new BeanFactoryAwareMethodInterceptor()`

                ä¸ºä»£ç†ç±»æ³¨å…¥ `beanFactory` å±æ€§
                
- é¡¹ç›®ä¸­å£°æ˜çš„ Bean æ˜¯å¦‚ä½•è¢«æ³¨å†Œçš„ï¼Ÿ

    > å½’æ ¹ç»“åº•ï¼Œé€šè¿‡é¡¹ç›®ä¸­å£°æ˜çš„é…ç½®ç±»ã€‚
    > 
    > ä» Spring çš„ main æ–¹æ³•å¼€å§‹ï¼Œé€šè¿‡ @ComponentScan éå†æ‰¾åˆ°  è·¯å¾„ä¸‹æ‰€æœ‰çš„ class æ–‡ä»¶ï¼Œæ³¨å†Œä¸º BeanDefinitionã€‚
    > 
    > æ‰¾åˆ°å…¶ä¸­çš„ @Configuration ç±»ï¼Œè§£æä¸å…¶ç›¸å…³çš„ç±»æ³¨å†Œä¸º  BeanDefinitionã€‚
    
    ä¸»è¦é€»è¾‘ä¾èµ– BeanDefinitionRegistry åç½®å¤„ç†å™¨  `ConfigurationClassPostProcessor`ã€‚
    
    1. ä» beanDefinitionRegistry ä¸­æ‰¾å‡ºæ‰€æœ‰é…ç½®ç±»ï¼Œä½œä¸ºå€™é€‰ï¼Œç­‰ å¾…å¤„ç†ã€‚
    
        - @Configuration ä¿®é¥°çš„ç±»
        - @Componentã€@ComponentScanã€@Importã€ @ImportResource ä¿®é¥°çš„ç±»æˆ–è€…æœ‰ @Bean æ–¹æ³•çš„ç±»
    
        ä¸€æ³¢ç­›é€‰åï¼Œæ­¤æ—¶çš„å€™é€‰ BeanDefinition å…¶å®åªæœ‰  `application`ã€‚
    
    2. æ„é€  BeanNameGeneratorï¼Œä¸ºå¾…ä¼šæ³¨å†Œçš„ BeanDefinition ç”Ÿ   æˆ beanName
    3. åˆ›å»ºé…ç½®ç±» ConfigurationClassParserï¼Œç”¨äºå¾…ä¼šè§£ææ‰«æå‡ºçš„    æ‰€æœ‰é…ç½®ç±»ï¼Œå¹¶æ·»åŠ åˆ°åä¸º configurationClass çš„ map ä¸­ã€‚
    4. parser.parse(candidates); //å¼€å§‹è§£æ
       1. è§£æå†…éƒ¨æˆå‘˜ç±»ï¼Œé€’å½’è§£æ
    
       2. è§£æ @PropertySource æ³¨è§£æŒ‡ç¤ºçš„ç±»
       3. è§£æ @ComponentScan æ³¨è§£è·¯å¾„ä¸‹çš„ç±»ï¼Œç”Ÿæˆ  BeanDefinitionï¼Œå¦‚æœå­˜åœ¨è¢« @ComponentScan ä¿®é¥°çš„ç±»ï¼Œé€’å½’ è§£æ
       4. è§£æ @Import æ³¨è§£å¯¼å…¥çš„ç±»
    
            1. å¯¼å…¥ç±»ç±»å‹ä¸º `ImportSelector.class` æ—¶
    
                1. ç±»å‹ä¸º DeferredImportSelector.class æ—¶
    
                    æ·»åŠ åˆ° `deferredImportSelectors`ï¼Œç­‰å¾…å¤„ç†
    
                2. å…¶ä»–ï¼Œé€’å½’å¤„ç†ï¼Œç›´åˆ°å°†éœ€è¦å¯¼å…¥çš„æ™®é€šé…ç½®ç±»å¤„ç†å®Œ
    
            2. å¯¼å…¥ `ImportBeanDefinitionRegistrar.class` ç±»å‹æ—¶
                
                å¯¼å…¥ `importBeanDefinitionRegistrars`ï¼Œç­‰å¾…å¤„ç†
            
            3. éƒ½ä¸æ˜¯ï¼Œä½œä¸ºæ™®é€šé…ç½®ç±»è¢«è§£æ
       5. è§£æ @ImportResource æ³¨è§£æŒ‡ç¤ºçš„ç±»ï¼Œå¡«å…¥   `importedResources` ä¸­
       6. è§£æ @Bean ä¿®é¥°çš„æ–¹æ³•å¼•å…¥çš„ bean
       7. è§£ææ¥å£ä¸­é»˜è®¤æ–¹æ³•å¯èƒ½å¼•å…¥çš„ bean
       8. è§£æçˆ¶ç±»ï¼Œè¿”å›ç„¶åé€’å½’è§£æ
       9. è‹¥å…¨éƒ¨é€’å½’å®Œæˆï¼Œè¿”å›nullï¼Œè·³å‡ºè§£æè¿‡ç¨‹
       10. `parse()` æ–¹æ³•è¿”å›å‰ï¼Œå¤„ç†   `deferredImportSelectors` ä¸­éœ€è¦å»¶è¿Ÿæ³¨å†Œçš„    BeanDefinitionï¼Œå› ä¸ºè¿™äº› BeanDefinition æ³¨å†Œæœ‰ conditionï¼Œæ‰€ä»¥éœ€è¦åœ¨å…¶ä½™çš„åŠ è½½å®Œåï¼Œå†è½®åˆ°ä»–ä»¬
    
    5. this.reader.loadBeanDefinitions(configClasses);
    
       å°† configClasses ä¸­çš„ç±»è§£æä¸º BeanDefinitionï¼Œåªæœ‰  @ComponentScan æ‰«æå‡ºæ¥çš„ç±»å…¨éƒ¨å˜ä¸ºäº† BeanDefinitionï¼Œå…¶ä½™çš„æš‚æ—¶å­˜åœ¨äº configClass ä¸­ã€‚
    
        1. registerBeanDefinitionForImportedConfigurationClass  (configClass);
    
            å°† ImportSelector.class å¯¼å…¥çš„ç±»è§£æ
    
        2. loadBeanDefinitionsForBeanMethod(beanMethod);
    
            å°† BeanMethod å¯¼å…¥çš„ç±»è§£æ
    
        3. loadBeanDefinitionsFromImportedResources (configClass.getImportedResources());
    
            å°†ä¸Šé¢å­˜å…¥ `importedResources` ä¸­çš„ç±»è§£æ
    
        4. loadBeanDefinitionsFromRegistrars(configClass.   getImportBeanDefinitionRegistrars());
    
            å°†ä¸Šé¢å­˜å…¥ `importBeanDefinitionRegistrars` ä¸­çš„    ç±»å¤„ç†æ‰ï¼Œè°ƒç”¨ `ImportBeanDefinitionRegistrar` çš„   æ¥å£æ–¹æ³• registrar.registerBeanDefinitions (metadata, this.registry)
    
    6. loadBeanDefinitions æ­¥éª¤ä¸­å¦‚æœæœ‰æ–°çš„ beanDefinition è¢«å‘ç°ï¼ŒåŠ å…¥ candidatesï¼Œé€’å½’é‡æ–°è§£æ

- @Async æºç è§£æ

    1. `@EnableAsync` å¼•å…¥ `AsyncConfigurationSelector.class`ï¼Œç„¶åå¼•å…¥ `ProxyAsyncConfiguration.class`ï¼Œæœ€ç»ˆå¼•å…¥ä¸€ä¸ª bean `AsyncAnnotationBeanPostProcessor`ã€‚
    2. `AsyncAnnotationBeanPostProcessor`ä¼šç”Ÿæˆå¹¶æŒæœ‰ä¸€ä¸ªåˆ‡é¢ `AsyncAnnotationAdvisor`ã€‚
    3. å½“æ‰©å±•ç‚¹ `postProcessAfterInitialization()` è¢«è°ƒç”¨æ—¶ï¼Œåˆ¤æ–­
       1. å½“å‰ bean å·²ç»æ˜¯ä»£ç†å¯¹è±¡æ—¶ï¼Œåˆ¤æ–­åˆ‡é¢èƒ½å¦åº”ç”¨ bean çš„æ–¹æ³•ï¼Œå¯ä»¥åˆ™æ”¾å…¥ä»£ç†çš„åˆ‡é¢ä¸­ã€‚
       2. å½“å‰ bean éä»£ç†å¯¹è±¡æ—¶ï¼Œåˆ‡é¢åˆæ ¼ï¼Œåˆ™åˆ›å»ºä»£ç†ï¼Œå¦åˆ™è¿”å›åŸå§‹ beanã€‚

- [Bean åˆ›å»ºè¿‡ç¨‹æºç è§£æ](https://segmentfault.com/a/1190000022309143#item-3-3)

  - createBean ä¸­çš„æ‰©å±•ç‚¹

    1. æ‰§è¡Œ bean å®ä¾‹åŒ–å‰ç½®å¤„ç†å™¨, `InstantiationAwareBeanPostProcessor` çš„ `postProcessBeforeInstantiation()` æ–¹æ³•
   
    2. bean å®ä¾‹åŒ–
    3. `MergedBeanDefinitionPostProcessor` çš„ `postProcessMergedBeanDefinition()` æ–¹æ³•

       - CommonAnnoatationBeanPostProcessor æ‰§è¡Œæ—¶ï¼Œé¦–å…ˆè°ƒç”¨çˆ¶ç±» InitDestroyAnnotationBeanPostProcessor çš„æ­¤æ–¹æ³•ï¼Œå®ƒè§£æå’Œåˆå§‹åŒ–ï¼ˆ@PostConstructï¼‰å’Œé”€æ¯ï¼ˆ@PreDestoryï¼‰ç›¸å…³çš„æ³¨è§£å¹¶ç¼“å­˜åˆ° lifecycleMetadataCache ä¸­ã€‚çˆ¶ç±»å®Œæˆåï¼Œå®ƒæœ¬èº«è´Ÿè´£ç¼“å­˜ @Resource æ³¨è§£çš„èµ„æº

    4. æ‰§è¡Œ bean å®ä¾‹åŒ–åç½®å¤„ç†å™¨, `InstantiationAwareBeanPostProcessor` çš„ `postProcessAfterInstantiation()` æ–¹æ³•
    5. å±æ€§å€¼æ³¨å…¥å‰ï¼Œè¿›è¡Œå¤„ç†`InstantiationAwareBeanPostProcessor` çš„ `postProcessPropertyValues()` æ–¹æ³•
    6. åº”ç”¨å±æ€§å€¼ï¼Œè§£æå±æ€§å€¼ä¸­çš„ bean å¼•ç”¨, æœªåŠ è½½çš„å»åŠ è½½
    7. è°ƒç”¨ bean å‰ç½®å¤„ç†å™¨, `BeanPostProcessor` çš„ `postProcessBeforeInitialization()`
        - æ­¤æ—¶ä¼šæ‰§è¡Œ `@PostConstruct`
    8. bean åˆå§‹åŒ–ï¼Œè‹¥æ˜¯ InitializingBean, è°ƒç”¨ `afterPropertiesSet()`
    9.  è°ƒç”¨è‡ªå®šä¹‰ `init-method`ã€‚
    10. è°ƒç”¨ bean åç½®å¤„ç†å™¨, `BeanPostProcessor` çš„ `postProcessAfterInitialization()`
        - AOP å¯åœ¨æ­¤æ—¶è¿”å›æ–°çš„ bean å®ä¾‹
    11. è°ƒç”¨ `DestructionAwareBeanPostProcessor` çš„ `requiresDestruction` æ–¹æ³•, åˆ¤æ–­æ—¶å€™éœ€è¦æ³¨å†Œ bean é”€æ¯é€»è¾‘

- [`prepareContext() æ–¹æ³•`](https://www.cnblogs.com/youzhibing/p/9697825.html)

    1. å°† context ä¸­çš„ environment æ›¿æ¢æˆ SpringApplication ä¸­åˆ›å»ºçš„ environment
    2. ç”Ÿæˆ Application ä¸»ç±»çš„ BeanDefinitionï¼Œå¹¶æ³¨å†Œåˆ° BeanDefinitionMap

- [`AbstractApplicationContext` çš„ `refresh()` æ–¹æ³•æºç è§£æ](https://blog.csdn.net/f641385712/article/details/88041409)

- [Springä»£ç†åˆ›å»ºåŠ AOP é“¾å¼è°ƒç”¨è¿‡ç¨‹](https://blog.csdn.net/l6108003/article/details/106577515)

    åˆ›å»º bean çš„è¿‡ç¨‹ä¸­ï¼Œåœ¨æ‰©å±•ç‚¹ `AbstractAutoProxyCreator.getEarlyBeanReference(ï¼‰` æˆ– `AbstractAutoProxyCreator.postProcessAfterInitialization()` å¤„ï¼Œè·å– `AbstractAutoProxyCreator.wrapIfNecessary()` æ–¹æ³•æ£€æµ‹ç±»å‹ä¸º `Advisor.class` çš„ bean ä»¥åŠè¢« `@Aspect` æ³¨è§£æ³¨é‡Š(ä¸»è¦)çš„ beanã€‚
    
    å°†åˆ‡é¢ bean ä¸­çš„å¢å¼ºæ–¹æ³•å°è£…ä¸º Advisorï¼Œå¹¶å°†åˆ‡é¢æ–¹æ³•æŒ‰ç…§å›ºå®šé¡ºåºæ’åºã€‚

    åˆ‡é¢ bean æŒ‰ç…§ `PriorityOrdered`ã€`Ordered` æ¥å£æˆ– `@Order` æ³¨è§£é¡ºåºæ’åºã€‚

    é€‰å‡ºåˆæ ¼çš„åˆ‡é¢åï¼Œåˆ›å»ºå½“å‰ bean çš„ä»£ç†ã€‚

    ä»¥ JdkDynamicAopProxy ä¸ºä¾‹ï¼Œå®ƒä½œä¸º InvocationHandlerï¼Œåœ¨è°ƒç”¨åˆ°å®ƒçš„ invoke() æ–¹æ³•æ—¶ï¼Œå®ƒä¼šå°†ä¸Šé¢åˆæ ¼çš„åˆ‡é¢ç”Ÿæˆä¸º MethodInterceptor çš„è°ƒç”¨é“¾ï¼Œæ¯å½“ä»£ç†ç±»æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œåˆ‡é¢æ–¹æ³•å°†è¢«åº”ç”¨ã€‚

  - [AOP åˆ‡é¢æ‰§è¡Œé¡ºåº](https://blog.csdn.net/qq_32331073/article/details/80596084?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase)

    å¯¹äºåˆ‡é¢å†…éƒ¨çš„ Advisor é¡ºåºï¼Œä¸ºäº†æ»¡è¶³ `Around -> Before -> Around -> After -> AfterReturning -> AfterThrowing` çš„é¡ºåºï¼Œåœ¨æ‰§è¡Œæ—¶çš„ Advisor è°ƒç”¨é“¾ä¸­ï¼Œå®ƒä»¬çš„é¡ºåºå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¯¥é¡ºåºåœ¨ä¸º bean ç”Ÿæˆä»£ç†æ—¶ä¾¿æ’å¥½åºäº†ã€‚

    ![åŒä¸€ä¸ªAspectå†…Advisorçš„é¡ºåº
](https://github.com/skykira/TheirNotes/blob/master/source/picture/%E5%90%8C%E4%B8%80%E4%B8%AAAspect%E5%86%85Advisor%E7%9A%84%E9%A1%BA%E5%BA%8F.png?raw=true)

- [Spring å¾ªç¯ä¾èµ–](https://blog.csdn.net/f641385712/article/details/92801300)

    å¾ªç¯ä¾èµ–æ˜¯å› ä¸ºå¯¹è±¡ä¹‹é—´å¾ªç¯å¼•ç”¨ï¼Œé€ æˆé—­ç¯ã€‚é€ æˆå¾ªç¯ä¾èµ–æƒ…å†µåŒ…æ‹¬ï¼Œæ„é€ å™¨æ³¨å…¥ã€prototype æ¨¡å¼çš„å±æ€§æ³¨å…¥ã€å•ä¾‹æ¨¡å¼çš„å±æ€§æ³¨å…¥æˆ–æ–¹æ³•æ³¨å…¥ä¸‰ç§ã€‚
    
    Spring èƒ½è§£å†³å•ä¾‹æ¨¡å¼çš„å±æ€§æ³¨å…¥é€ æˆå¾ªç¯ä¾èµ–çš„æƒ…å†µã€‚è§£å†³æ–¹æ³•æ˜¯å°† bean å®ä¾‹åŒ–ååˆå§‹åŒ–å‰çš„ä¸­é—´æ€æš´éœ²å‡ºæ¥ï¼Œç„¶åé€šè¿‡ä¸‰çº§ç¼“å­˜ä¿è¯å¼•ç”¨æ­£ç¡®ã€‚

  - [Spring è§£å†³å¾ªç¯ä¾èµ–ä¸ºä»€ä¹ˆä½¿ç”¨ä¸‰çº§ç¼“å­˜ï¼Œè€Œä¸æ˜¯äºŒçº§ç¼“å­˜](https://www.cnblogs.com/grey-wolf/p/13034371.html)

    `getEarlyBeanReference()` ä¸º `SmartInstantiationAwareBeanPostProcessor` æä¾›äº†åœ¨ bean åˆå§‹åŒ–å‰æš´éœ²è‡ªå·±çš„æœºä¼šï¼Œç”¨äºè§£å†³åˆå§‹åŒ– bean æ—¶ï¼Œ `BeanPostProcessor` æœ€ç»ˆå°† bean åŒ…è£…ä¸ºä»£ç†ç±»ï¼Œè€Œä¹‹å‰æš´éœ²å‡ºå»çš„ bean æ˜¯åŸå§‹ç±»çš„é—®é¢˜ã€‚

  - [@Async å¯¼è‡´å¾ªç¯ä¾èµ–æŠ¥é”™åŸç†](https://blog.csdn.net/f641385712/article/details/92797058)

    ä»¥[è¯¥å¾ªç¯ä¾èµ–](https://github.com/skykira/TheirNotes/tree/master/source/SourceCode/%40Async)ä¸ºä¾‹é˜è¿°æŠ¥é”™æµç¨‹: 
    
    1. getBean -> doGetBean -> createBean -> doCreateBean è·å– C, åˆ›å»ºåŸå§‹bean `c`ï¼Œå°† c åŠ å…¥ä¸‰çº§ç¼“å­˜ `singletonFactories` ä¸­

    2. populateBean å¡«å…… C å±æ€§ D
    3. getBean -> doGetBean -> createBean -> doCreateBean è·å– Dï¼Œåˆ›å»ºåŸå§‹bean `d`ï¼Œå°† d åŠ å…¥ä¸‰çº§ç¼“å­˜ `singletonFactories` ä¸­
    4. populateBean å¡«å…… D å±æ€§ C
    5. doGetBean æ—¶ï¼Œä»ä¸‰çº§ç¼“å­˜ä¸­è·å– c çš„æ—©æœŸå¼•ç”¨ã€‚å‡è®¾æœ‰åˆ‡é¢ï¼Œæ­¤æ—¶ç»è¿‡åç½®å¤„ç†å™¨ `AbstractAutoProxyCreator` çš„ `getEarlyBeanReference()` ç”Ÿæˆ `c` çš„ä»£ç†ç±»å¯¹è±¡ï¼ˆä¸€å·ï¼‰ï¼Œ@Transactional æ³¨è§£ç”Ÿæˆä»£ç†ä¹Ÿæ˜¯é€šè¿‡æ’å…¥åˆ‡é¢æ¥å®Œæˆçš„ï¼Œä¸ä¼šé¢å¤–åˆ›å»ºä»£ç†ã€‚ä»£ç†ç±» `c`ï¼ˆä¸€å·ï¼‰ èµ‹ç»™äº† `d`
    6. initializeBean åˆå§‹åŒ– `d`ï¼Œæœ‰åˆ‡é¢ï¼Œç”Ÿæˆä»£ç†ç±» `d`ã€‚ç„¶åç»è¿‡ @Async çš„åç½®å¤„ç†å™¨æ—¶ï¼Œ@Async çš„åç½®å¤„ç†å™¨åšäº†åˆ¤æ–­ï¼Œå¦‚æœä¼ å…¥çš„æ˜¯ä»£ç†ç±»ï¼Œåˆ™ç›´æ¥å°†å¢å¼ºæ·»åŠ åˆ°å½“å‰ä»£ç†ä¸­ï¼Œä¸ä¼šé‡æ–°åˆ›å»ºæ–°çš„ä»£ç†ç±»ã€‚æœ€ç»ˆ d åˆå§‹åŒ–å®Œæˆï¼Œæˆä¸ºä»£ç†ç±» `d`ã€‚`d` æ²¡æœ‰æš´éœ²æ—©æœŸå¼•ç”¨ï¼Œæ— éœ€è¿›è¡Œå¾ªç¯ä¾èµ–æ£€æŸ¥ã€‚
    7. ä»£ç†ç±» `d` èµ‹å€¼ç»™äº† `c`
    8. initializeBean åˆå§‹åŒ– `c`ï¼Œå› ä¸ºæš´éœ²æ—©æœŸå¼•ç”¨æ—¶å·²ç»è¿›è¡Œè¿‡åˆ‡é¢ä»£ç†ï¼ŒAbstractAutoProxyCreator ç¼“å­˜ä¸­å·²ç»æœ‰äº†è®°å½•ï¼ŒwrapIfNecessary() ä¾¿ä¸å†è¿›è¡Œä»£ç†ï¼Œç„¶åå°±è¿”å›äº†åŸå§‹ `c`ï¼ç„¶åç»è¿‡ @Async çš„åç½®å¤„ç†å™¨æ—¶ï¼Œå› ä¸º @Async å¹¶æ²¡æœ‰å®ç°æ—©æœŸå¼•ç”¨é€»è¾‘ï¼Œæ­¤æ—¶éœ€è¦å¯¹åŸå§‹ `c` è¿›è¡Œä»£ç†ï¼Œç”Ÿæˆä»£ç†ç±» `c`(äºŒå·)ã€‚

        Spring çš„åŸåˆ™æ˜¯ï¼Œæ—©æœŸæš´éœ²è¿‡äº†ï¼Œæ­¤æ—¶åç½®å¤„ç†æ—¶å°±ä¸å†åŠ¨å®ƒäº†ã€‚

    9.  åˆå§‹åŒ–å®Œæˆåï¼Œå› ä¸º `c` çš„æ—©æœŸå¼•ç”¨æš´éœ²å‡ºå»äº†ï¼Œå› æ­¤éœ€è¦å¾ªç¯ä¾èµ–æ£€æŸ¥ã€‚å‘ç° `d` ä¾èµ– `c`ï¼Œä¸”ä½äº `alreadyCreated` ä¸­ï¼Œè¯´æ˜åˆ›å»ºè¿‡ï¼Œå¾—åˆ°è¿‡ `c` çš„æ—©æœŸå¼•ç”¨(ä¸€å·)ï¼Œå› æ­¤å•ä¾‹ `c` å‡ºç°äº†ä¸åŒçš„ç‰ˆæœ¬åœ¨ä¸åŒçš„å¼•ç”¨ä¸­ï¼ŒæŠ¥é”™ã€‚
    
    - [@Lazy è§£é™¤å¾ªç¯ä¾èµ–](https://www.cnblogs.com/yangxiaohui227/p/10523025.html)

- [@RequestMapping æ˜ å°„å…³ç³»]()

    `RequestMappingHandlerMapping` çš„ `afterPropertiesSet()` å¼€å¯æ˜ å°„å…³ç³»çš„å¤„ç†ã€‚`isHandler()` æ–¹æ³•åˆ¤æ–­ï¼Œåªæœ‰æ ‡æœ‰ @Controller æˆ– @RequestMapping çš„ bean æ‰ä¼šè¢«æ‰«æã€‚

- [`AbstractAdvisorAutoProxyCreator` å†³å®šæ˜¯å¦è¦å¯¹å½“å‰ bean è¿›è¡Œä»£ç†](https://www.cnblogs.com/zcmzex/p/8822509.html)

    > spring ä¾èµ–æ³¨å…¥æ—¶ï¼Œä»€ä¹ˆæ—¶å€™ä¼šåˆ›å»ºä»£ç†ç±»ï¼Œä»€ä¹ˆæ—¶å€™æ˜¯æ™®é€š beanï¼Ÿ

- [Spring TargetSource](https://blog.csdn.net/shenchaohao12321/article/details/85538163)

    ä»£ç†ç±» JdkDynamicAopProxy çš„ AdvisedSupport æŒæœ‰ä»£ç†ç›®æ ‡ç›¸å…³çš„ä¿¡æ¯ã€‚
    
    åœ¨ AOP é“¾å¼è°ƒç”¨å¼€å§‹æ‰§è¡Œæ—¶ï¼Œé€šè¿‡ `targetSource.getTarget()` è·å¾—çœŸæ­£çš„ç›®æ ‡å¯¹è±¡ targetã€‚é€šè¿‡è¿™ç§æœºåˆ¶ä½¿å¾—æ–¹æ³•è°ƒç”¨å˜å¾—çµæ´»,å¯ä»¥æ‰©å±•å‡ºå¾ˆå¤šé«˜çº§åŠŸèƒ½,å¦‚:target pool(ç›®æ ‡å¯¹è±¡æ± )ã€hot swap(è¿è¡Œæ—¶ç›®æ ‡å¯¹è±¡çƒ­æ›¿æ¢)ã€‚

## Dubbo

- [æ¥å£è‡ªé€‚åº”ç±» T$Adaptive æŸ¥çœ‹](https://blog.csdn.net/swordyijianpku/article/details/105737163?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-2)

    æ ¹æ®urlä¸­çš„å‚æ•°ï¼Œåœ¨è¿è¡Œæ—¶åŠ è½½ SPI æ‰©å±•ç±»ã€‚

    SPIçš„å®ç°ç±»åˆ†ä¸ºä¸‰ç±»ï¼Œ1. è‡ªé€‚åº”å®ç°ç±»ï¼Œ2. åŒ…è£¹ç±»ï¼Œ3. æ™®é€šå®ç°ç±»ï¼Œåœ¨ ExtensionLoaderçš„getExtension(name) æ—¶ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨å°†åŒ…è£¹ç±»åŒ…åœ¨æ™®é€šå®ç°ç±»å¤–éƒ¨ã€‚ä¾‹å¦‚ï¼ŒProtocolFilterWrapper å…·æœ‰ç”Ÿæˆ invoker è°ƒç”¨é“¾çš„èƒ½åŠ›ï¼Œç”Ÿæˆ Extension æ—¶ï¼Œå®ƒè‡ªåŠ¨åŒ…è£¹ä½æ™®é€š Extensionï¼Œå½“è°ƒç”¨ export() æ–¹æ³•å¯¼å‡ºæ—¶ï¼Œä¾¿èƒ½å¤Ÿè°ƒç”¨åˆ°å®ƒçš„å¢å¼ºæ–¹æ³•ã€‚

- [æ¥å£ Wrapper ç±»æŸ¥çœ‹](https://www.jianshu.com/p/57d53ff17062)

    å¯ä»¥é€šè¿‡ç”Ÿæˆçš„ Wrapper å­ç±»ï¼Œè°ƒç”¨æ¥å£å®ç°ç±»çš„æ–¹æ³•ï¼Œç›¸å½“äºåå°„è°ƒç”¨çš„å¦ä¸€ç§å®ç°ã€‚

- ReferenceAnnotationBeanPostProcessor ç»§æ‰¿ AnnotationInjectedBeanPostProcessor<Reference> å®Œæˆ Reference å±æ€§æ³¨å…¥ã€‚

- ServiceAnnotationBeanPostProcessor ç»§æ‰¿ BeanDefinitionRegistryPostProcessor å®Œæˆ @Service(æŒ‡ com.alibaba.dubbo.config.annotation.Service) æ³¨é‡Šç±»çš„æ‰«æï¼Œå¹¶å°†æ„å»ºå¯¹åº”çš„ ServiceBean çš„ BeanDefinition æ³¨å…¥åˆ° Spring å®¹å™¨ä¸­ï¼Œå½“å®ä¾‹åŒ– bean æ—¶ï¼Œå°†å¯¹ ServiceBean è¿›è¡Œå±æ€§æ³¨å…¥ï¼ˆæ¯”å¦‚ï¼Œref å±æ€§ï¼‰ã€‚

- [dubbo Filter ä¹‹ ContextFilter](https://blog.csdn.net/yuanshangshenghuo/article/details/107722549)

    é€šè¿‡ ContextFilter å¯¹ Invocation ä¸­çš„ attachments ä¸ RpcContext ä¸­çš„ LOCAL/SERVER_LOCAL è¿›è¡Œæ¶ˆæ¯ä¼ é€’ã€‚

- [æœ¬åœ°å­˜æ ¹å’Œæœ¬åœ°ä¼ªè£…](http://dubbo.apache.org/zh-cn/blog/dubbo-stub-mock.html#fn3)

- Dubbo [åˆå§‹åŒ–è¿‡ç¨‹](https://www.dazhuanlan.com/2019/12/08/5dec9c3fb6b49/)

    `DubboAutoConfiguration$MultipleDubboConfigConfiguration` çš„æ³¨è§£ `@EnableDubboConfig` å¼•å…¥äº† [DubboConfigConfigurationRegistrar.class](https://www.dazhuanlan.com/2020/02/09/5e3f67a09f421/)ï¼Œåˆå¯¼è‡´å¼•å…¥äº† `DubboConfigConfiguration.Single.class`ï¼Œå®ƒä»¬çš„æ³¨è§£ `@EnableDubboConfigBindings` å¼•å…¥äº† `DubboConfigBindingsRegistrar.class` ä»¥å¤„ç† `DubboConfigConfiguration.Single.class` çš„æ³¨è§£å€¼ï¼Œå³ `@EnableDubboConfigBindings` çš„å€¼ï¼ˆé…ç½®ç±»å…ƒç´ æ•°ç»„ï¼‰ï¼Œå¤„ç†è¿‡ç¨‹ä¸­ï¼Œä¸ºæ¯ä¸€ä¸ªdubbo é…ç½®ç±»ç”Ÿæˆï¼ˆç©ºçš„ï¼‰ BeanDefinition å’Œå¯¹åº”çš„ com.alibaba.dubbo.config.spring.beans.factory.annotation.DubboConfigBindingBeanPostProcessor#0ï¼Œè¯¥ DubboConfigBindingBeanPostProcessor å†…éƒ¨æŒæœ‰å¯¹åº”çš„ beanDefinition çš„åç§°ã€‚

    èº«ä¸º BeanDefinitionRegistryPostProcessor çš„ ServiceAnnotationBeanPostProcessor çš„ postProcessBeanDefinitionRegistry() æ‰¾åˆ°æ‰€æœ‰å¸¦æœ‰ @Service æ³¨é‡Šçš„ç±»ï¼Œå¹¶å°†å®ƒæ³¨å†Œä¸ºç±»å‹ä¸º ServiceBean çš„ beanDefinitionï¼Œå…¶ä¸­è®°å½•äº†å¯¹çœŸæ­£çš„ @Service æœåŠ¡æä¾›è€…ç±»çš„å¼•ç”¨ã€‚

    å½“ bean å®ä¾‹åŒ–æ—¶ï¼ŒDubboConfigBindingBeanPostProcessor çš„ postProcessBeforeInitialization() æ–¹æ³•åŒ¹é…åˆ°å¯¹åº”çš„ beanNameï¼Œç„¶åå¯¹ Dubbo çš„ AbstractConfig å„ä¸ªé…ç½®ç±»è¿›è¡Œå¯¹åº”çš„èµ‹å€¼ï¼Œæ ¹æ®å±æ€§å‰ç¼€ä¸ application.properties ä¸­çš„å±æ€§è¿›è¡Œç»‘å®šã€‚

    populateBean() æ—¶ï¼ŒAbstractAutowireCapableBeanFactory çš„ applyPropertyValues() æ–¹æ³•å°† serviceBean ä¸­çš„å±æ€§ï¼ˆä¾‹å¦‚ï¼šrefï¼‰ç”± RuntimeReference è½¬æ¢ä¸ºçœŸæ­£çš„ä»£ç†ç±»ã€‚ä¹‹åï¼ŒServiceBean ä½œä¸º InitializingBeanï¼Œåœ¨æ‰§è¡Œ afterPropertiesSet() æ–¹æ³•æ—¶ï¼Œä¼šå¯¹å†…éƒ¨çš„å…¶ä»–å±æ€§ï¼Œå¦‚ï¼šproviderã€protocolã€moduleç­‰è¿›è¡Œèµ‹å€¼ï¼Œé€šè¿‡åœ¨ beanFactory ä¸­æ ¹æ®ç±»å‹æ‰¾åˆ°å¯¹åº”çš„ beanã€‚

    æ‰€æœ‰å±æ€§è®¾ç½®å®Œæ¯•ï¼Œå¾…ä¼šå¯ä»¥å¯¼å‡ºæœåŠ¡ã€‚

- Dubbo Reference è£…é…è¿‡ç¨‹

    åœ¨ bean å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ï¼Œbean åˆšå®ä¾‹åŒ–ï¼Œåœ¨ populateBean() ä¹‹å‰ï¼Œæ‰§è¡Œ applyMergedBeanDefinitionPostProcessors() æ—¶ï¼Œä¼šå¯¹æ¯ä¸ª bean åº”ç”¨ MergedBeanDefinitionPostProcessor çš„ postProcessMergedBeanDefinition() æ–¹æ³•ï¼Œå…¶ä¸­ ReferenceAnnotationBeanPostProcessor ä¼šåœ¨æ–¹æ³•ä¸­æ‰§è¡Œ findInjectionMetadata() æ‰¾åˆ°è°ƒç”¨ InstantiationAwareBeanPostProcessor çš„ postProcessPropertyValues() æ–¹æ³•ï¼Œå…¶ä¸­ AnnotationInjectedBeanPostProcessor çš„ postProcessPropertyValues() å†…éƒ¨çš„ findInjectionMetadata() æ–¹æ³•å¯¹æ¯ä¸ªç±»æ‰¾åˆ°å…¶ä¸­å¸¦æœ‰ @Reference æ³¨é‡Šçš„å±æ€§ï¼ŒåŒ…è£…ä¸º dubbo çš„ AnnotationInjectedBeanPostProcessor.AnnotatedInjectionMetadata ç±»å‹å¹¶ç¼“å­˜èµ·æ¥ã€‚

    populateBean() æ—¶ï¼ŒAnnotationInjectedBeanPostProcessor(å®é™…ä¸º ReferenceAnnotationBeanPostProcessorï¼Œå±æ€§ annotationType ä¸º @Reference) ä½œä¸º InstantiationAwareBeanPostProcessorï¼Œè¢«è°ƒç”¨å…¶ postProcessPropertyValues() æ–¹æ³•ï¼ˆé’ˆå¯¹springä¸­ï¼Œè¯¥æ–¹æ³•åœ¨spring5.1ä»¥åè¢«æ›¿æ¢ä¸º postProcessProperties()ï¼‰ï¼Œè¯¥æ–¹æ³•ä»ç¼“å­˜ä¸­å¾—åˆ°å½“å‰ bean çš„éœ€è¦è¢«æ³¨å…¥çš„å±æ€§ï¼Œæ‰§è¡Œ AnnotationInjectedBeanPostProcessor ä¸­ AnnotatedFieldElement çš„ inject() æ–¹æ³•ï¼ŒgetInjectedObject() -> ReferenceAnnotationBeanPostProcessor.doGetInjectedBean() -> buildReferenceBeanIfAbsent(referencedBeanName|ReferenceBean åç§°, reference|æ³¨é‡Š, injectedType|å±æ€§ç±»å‹, getClassLoader()) å¾—åˆ° ReferenceBeanï¼Œå¹¶å°† beanFactory ä¸­çš„ dubbo é…ç½®ç±»è®¾ç½®åˆ°å…¶ä¸­ã€‚æœ€åï¼Œå°†è¯¥ ReferenceBean ç”Ÿæˆ InvocationHandlerï¼Œå¦‚æœè¯¥æœåŠ¡ä¸ºè¿œç«¯æœåŠ¡ï¼Œåˆ™åœ¨æ­¤æ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œè®¾ç½® ReferenceBean çš„ ref å±æ€§ï¼Œç„¶ååˆ›å»ºjdkåŠ¨æ€ä»£ç†ï¼Œæ³¨å…¥æˆåŠŸã€‚

- DubboProtocol refer() ä¸º DubboInvoker æ„å»ºçš„ ExchangeClient

    - DubboProtocol
    1. Protocol.refer() ç”Ÿæˆ Invokerï¼ŒDubboProtocol ç”Ÿæˆ DubboInvoker
    2. å¼€å§‹ä¸º DubboInvoker æ„å»º ExchangeClient
    3. initClient() ä¸­ Exchangers.connect(url, requestHandler) å®Œæˆåˆå§‹åŒ– clientï¼Œå®Œæˆååœ¨å¤–é¢åŒ…è£¹ `ReferenceCountExchangeClient`
        - requestHandler ä¸ºåŒ¿åå†…éƒ¨ç±»`ExchangeHandlerAdapter`ï¼ŒçœŸæ­£å¤„ç† `ExchangeChannel channel, Object message` 
    - Exchangers
    1. connect() æ–¹æ³•å§”æ‰˜ç»™ Exchanger çš„å®ç°ç±» HeaderExchanger
    - HeaderExchanger
    1. HeaderExchanger è‡ªç„¶æ˜¯åˆ›å»º HeaderExchangerClient(Client client, boolean needHeartbeat)ï¼Œä¼ å…¥çš„ NettyClient è¢«åŒ…è£…ä¸º HeaderExchangeChannel
    - Transporters
    1. Transporters.connect(url, new `DecodeHandler`(new `HeaderExchangeHandler`(handler)))ï¼Œconnect() æ–¹æ³•å§”æ‰˜ç»™ Transporter çš„å®ç°ç±»ï¼ŒNettyTransporter
    - NettyTransporter
    1. new NettyClient(url, listener) åˆ›å»ºåŸºäº Netty çš„å®¢æˆ·ç«¯ã€‚
    - NettyClient
    1. super(url, wrapChannelHandler(url, handler));å¯¹ handler è¿›è¡Œæœ€åçš„åŒ…è£¹ã€‚
    2. ChannelHandlers.wrap(handler, url);
    - ChannelHandlers
    1. new `MultiMessageHandler`(new `HeartbeatHandler`(ExtensionLoader.getExtensionLoader(Dispatcher.class).getAdaptiveExtension().dispatch(handler, url)));
    - Dispatcher å¯¹åº”äº Dubbo çš„çº¿ç¨‹æ¨¡å‹
    1. Dispatcher ä¸åŒçš„å®ç°ç±»ï¼Œå¯¹åº”ä¸åŒçš„ handlerã€‚ä»¥ AllDispatcher ä¸ºä¾‹ï¼Œåˆ›å»º `AllChannelHandler`(handler, url)

    æ‰€ä»¥è¯´ï¼Œ[ChannelHandler](https://blog.csdn.net/yuanshangshenghuo/article/details/108631503) æœ€å¤–å±‚æ˜¯ MultiMessageHandlerï¼Œæœ€å†…å±‚æ˜¯ requestHandlerï¼ŒçœŸæ­£å¤„ç† channel æ•°æ®ã€‚å‘é€æ¥æ”¶æ•°æ®ï¼Œä»å¤–åˆ°å†…ã€‚

## Kafka

- [Kafka çš„ push ä¸ pull è®¾è®¡](https://blog.csdn.net/my_momo_csdn/article/details/93921625?utm_medium=distribute.pc_relevant.none-task-blog-baidulandingword-1&spm=1001.2101.3001.4242)

### åº•å±‚åŸç†âœ¨

- [kafka æ—¶é—´è½®è®¾è®¡](https://blog.lovezhy.cc/2020/01/11/Kafka%E6%8C%87%E5%8D%97-%E6%97%B6%E9%97%B4%E8%BD%AE%E5%AE%9E%E7%8E%B0/)

    **ä¸ªäººè§è§£**ï¼Œkafka æ—¶é—´è½®é€šè¿‡ hash ä½¿æ·»åŠ ä»»åŠ¡çš„æ—¶é—´å¤æ‚åº¦é™åˆ° o(1)ï¼ŒåŒæ—¶é€šè¿‡åˆ»åº¦åˆ†ç»„ï¼Œä½¿å¾—å»¶è¿Ÿé˜Ÿåˆ— delayQueue çš„æ·»åŠ é€Ÿåº¦å¢å¿«ã€‚

    æ¯ä¸ª timeWheel æŒæœ‰è‡ªå·±çš„ä¸Šä¸€çº§æ—¶é—´è½®ã€‚

    æ¯ä¸ª timeTask æŒæœ‰è‡ªå·±çš„ç»å¯¹æ—¶é—´ï¼Œæ”¾å…¥ä¸åŒçš„ bucket æ˜¯æ ¹æ®ç»å¯¹æ—¶é—´æ¥çš„ï¼Œæ‰€ä»¥æ— è®º currentTime æ˜¯å¦æ¨è¿›éƒ½ä¸å½±å“ timeTask æ·»åŠ åˆ°æ—¶é—´è½®ä¸­ã€‚ç„¶åï¼Œè¢«æ”¾å…¥äº† timeTask çš„ bucket çš„è¿‡æœŸæ—¶é—´ä¹Ÿä¼šæ›´æ–°ï¼ˆåŒæ ·æ ¹æ®ä»»åŠ¡çš„ç»å¯¹æ—¶é—´æ¥æ›´æ–°çš„ï¼‰

    delayQueue ä¸­æ²¡æœ‰è½®çš„æ¦‚å¿µï¼Œä»…æœ‰æŒæœ‰ç»å¯¹è¿‡æœŸæ—¶é—´çš„ bucketï¼Œå¦‚æœä¸Šä¸ªè½®æ¬¡çš„æŸä¸ª bucket è¢«éå†å‡ºæ¥ï¼Œåæ¥è¿™ä¸ª bucket çš„ç»å¯¹è¿‡æœŸæ—¶é—´æ›´æ–°äº†ï¼Œå°±è¦é‡æ–°æ·»åŠ è¿›å»ã€‚

    currentTime ä»…åœ¨æœ‰ä»»åŠ¡å‡º delayQueue æ—¶è¢«æ¨è¿›ï¼Œå¦åˆ™ä¸å˜ã€‚è¿™ä¸ä¼šå¯¼è‡´é—®é¢˜ï¼Œå› ä¸º delayQueue ä¸­çš„ bucket æŒæœ‰ç»å¯¹è¿‡æœŸæ—¶é—´ã€‚

    currentTimeï¼Œå…¶å®ï¼Œå”¯äºŒçš„ä½œç”¨å°±æ˜¯é”šå®šå¤šä¸ªæ—¶é—´è½®ï¼Œä½¿å¾—å±‚çº§æ—¶é—´è½®ä¹‹é—´æ—¶é—´ç›¸å¯¹ä¸€è‡´ï¼Œå¦åˆ™ timeTask æ·»åŠ åˆ°ä¸Šçº§æ—¶é—´è½®ä¸­æ—¶ï¼Œå¯èƒ½ä¼šè¢«æ‰§è¡Œæ‰ã€‚å¦ä¸€ä¸ªå°±æ˜¯ä¸‹é¢è¿™ä¸€æ®µæ‰€è¯´çš„ï¼Œç”¨äºæ‰§è¡Œä»»åŠ¡ã€‚

    å¯¹äºæœ€ä½ä¸€çº§æ—¶é—´è½®æ¥è¯´ï¼ŒcurrentTime çš„ç²¾ç¡®åº¦å®Œå…¨ä¸æ‰€è°“ï¼Œè™½ç„¶å®ƒç°åœ¨å·²ç»æ˜¯æ— æ‰€è°“çš„ã€‚æ‰§è¡Œä»»åŠ¡å‰ï¼Œå®ƒè‡ªç„¶ä¼šè¢«æ¨è¿›ã€‚

    é¡ºå¸¦ä¸€æï¼ŒtimeTask çš„æ‰§è¡Œæ˜¯é€šè¿‡é‡æ–°æ’å…¥ timeTask çš„æ–¹æ³•æ¥é¡ºä¾¿æ‰§è¡Œçš„ï¼ˆè¿™æ ·ä¹ŸåŒæ—¶å…¼å®¹äº†æ—¶é—´è½®çš„é™çº§æ“ä½œï¼‰ã€‚delayQueue ä¸­çš„ bucket æ—¶é—´åˆ°äº†åï¼Œå…ˆæ¨è¿› currentTimeï¼Œç„¶åæ·»åŠ  timeTaskï¼Œè¯¥æ‰§è¡Œçš„æ‰§è¡Œã€‚

- Kafka å®¢æˆ·ç«¯åŸç†

    å®¢æˆ·ç«¯ NetworkClient äº§ç”Ÿçš„æ¶ˆæ¯åˆ†åŒºåï¼Œå‘å¾€å„åˆ†åŒºå¯¹åº”çš„ RecordAccumulatorï¼Œå¤šæ¡æ¶ˆæ¯åœ¨æ”¶é›†å™¨ä¸­ç´¯ç§¯æˆä¸ºä¸€æ¡æ‰¹è®°å½•ï¼Œå¦‚æœåˆ†åŒºå†…çš„ç¬¬ä¸€æ¡æ‰¹è®°å½•æ»¡äº†ï¼Œåˆ™å¼€å§‹å‘é€è¿™æ¡æ‰¹è®°å½•ã€‚å‘é€æ—¶ï¼Œå°†ä¸åŒåˆ†åŒºçš„å¤šæ¡æ‰¹è®°å½•æŒ‰ç…§æœåŠ¡ç«¯èŠ‚ç‚¹åˆ†ç»„ï¼Œæ„é€  ClientRequestï¼Œç„¶åå‘å¾€å¯¹åº”èŠ‚ç‚¹ã€‚
    
    å®¢æˆ·ç«¯çš„è¯·æ±‚å‘é€å’Œå“åº”æ¥æ”¶é€šè¿‡ Selector æ¨¡å¼è¿›è¡Œã€‚Selector è½®è¯¢å¾—åˆ°å¯è¯»æˆ–å¯å†™äº‹ä»¶æ—¶ï¼Œé€šè¿‡ KafkaChannel å°†å¤„ç†é€»è¾‘é€šè¿‡ä¼ è¾“å±‚äº¤ç»™ SocketChannel è¿›è¡Œå®é™…å‘é€ã€‚

    KafkaChannel æŒæœ‰ Send å¯¹è±¡ å’Œ NetworkReceiveã€‚Send å’Œ NetworkReceive éƒ½ç”¨å­—èŠ‚ç¼“å†²åŒºæ¥ç¼“å­˜é€šé“ä¸­çš„æ•°æ®ï¼ŒSend åŒ…å«ä¸€ä¸ªç¼“å†²åŒºï¼ŒNetworkReceive åŒ…å«ä¸¤ä¸ªç¼“å†²åŒºï¼Œä¸€ä¸ªæ™®é€šç¼“å†²åŒºï¼Œè¿˜æœ‰ä¸€ä¸ª Size ç¼“å†²åŒºã€‚å®ä¾‹åŒ–æ—¶ï¼Œä¸º size ç¼“å†²åŒºåˆ†é…  4 å­—èŠ‚ï¼Œå½“ size ç¼“å†²åŒºè¯»æ»¡åï¼Œé€šè¿‡ size.getInt() å¾—åˆ° NetworkReceive æ™®é€šç¼“å†²åŒºçš„å¤§å°ï¼Œåˆ†é…å†…å­˜ï¼Œå¹¶å¼€å§‹æ¥æ”¶æ•°æ®ã€‚

- [Group coordinator & Group leader ä¸åˆ†åŒºé‡åˆ†é…](https://www.jianshu.com/p/a8461707d6ea)

    å…³äº consumers çš„ç»´æŠ¤ï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼šgroup coordinator & group leader:
    
    1. group coordinator: æ˜¯ç‰¹æ®Šçš„ brokerã€‚consumers poll æ¶ˆæ¯ & commit æ¶ˆè´¹æ¶ˆæ¯è®°å½•æ—¶ï¼Œä¼šå‘é€ heartbeats åˆ° group coordinator æ¥åŒæ—¶å‘ŠçŸ¥è‡ªå·±çš„å¥åº·çŠ¶å†µã€‚
    
    2. group leader: ç¬¬ä¸€ä¸ªåŠ å…¥ consumer group çš„ consumer å°±æ˜¯è¯¥ group çš„ group leaderã€‚group coordinator ä¼šæŠŠ consumers åˆ—è¡¨å‘ç»™ group leader æ¥ç»´æŠ¤ã€‚group leader è´Ÿè´£ assign & reassign partitionsã€‚
    
    å¦‚æœ consumer crashedï¼network failureï¼Œé•¿æ—¶é—´æ²¡æœ‰å‘é€ heartbeats åˆ° group coordinator æ—¶ï¼Œgroup coordinator ä¼šè®¤ä¸ºè¯¥ consumer å¤±è”ï¼Œå¹¶é€šçŸ¥ group leader rebalance partitionï¼Œgroup leader å°† rebalance çš„ç»“æœé€šçŸ¥ group coordinatorï¼Œç”± coordinator æ¥é€šçŸ¥ consumers æ–°çš„ partitions å…³ç³»ã€‚

- [å†å‡è¡¡è¿‡ç¨‹](https://www.zhihu.com/question/63892760/answer/214411241)

    consumer caller thread åªæœ‰å½“ poll() çš„æ—¶å€™æ‰ä¼šçŸ¥é“åˆ°åº• rebalance æœ‰æ²¡æœ‰è¢« triggerï¼Œheartbeat thread å½“æ”¶åˆ° heartbeat error code çš„æ—¶å€™åªä¼š set ä¸€ä¸ª flagï¼Œè¿™ä¸ª flag åªæœ‰ caller thread è§¦å‘ poll() çš„æ—¶å€™æ‰ä¼šæŸ¥çœ‹å¹¶å‘é€joinRequestã€‚

    åœ¨ poll() é‡Œé¢æˆ‘ä»¬æ˜¯ç”¨ä¸€ä¸ª do-while on pollOnce()ï¼Œæ¯æ¬¡éƒ½ä¼šçœ‹ä¸€ä¸‹é‚£ä¸ª flagï¼Œæ‰€ä»¥ä¼šå¾—çŸ¥

    å†å‡è¡¡æ­¥éª¤ï¼š
    
    1. ç¬¬ä¸€é˜¶æ®µ(FIND_COORDINATOR)

        æ¶ˆè´¹è€…æ‰¾åˆ°æœ¬æ¶ˆè´¹ç»„å¯¹åº”çš„ GroupCoordinator æ‰€åœ¨çš„ brokerï¼Œå¹¶å»ºç«‹è¿æ¥ã€‚æŸ¥æ‰¾æ—¶ï¼Œä¼šå‘é›†ç¾¤ä¸­è´Ÿè½½æœ€å°çš„èŠ‚ç‚¹å‘é€ FindCoordinatorRequest è¯·æ±‚ã€‚

    2. ç¬¬äºŒé˜¶æ®µ(JOIN GROUP)

        æ¶ˆè´¹è€…ä¼šå‘ GroupCoordinator å‘é€ JoinGroupRequestè¯·æ±‚ã€‚è¯·æ±‚ä¸­çš„ protocol_metadata å­—æ®µç”± PartitionAssignoræ¥å£çš„ `subscription()` æ–¹æ³•å¾—åˆ°ã€‚

        å¦‚æœæ˜¯åŸæ¶ˆè´¹è€…é‡æ–°åŠ å…¥æ¶ˆè´¹è€…ç»„ï¼Œå‘é€è¯·æ±‚å‰è¿˜ä¼šè§¦å‘ ConsumerRebalanceListener çš„ `onPartitionsRevoked()` æ–¹æ³•ã€‚

        GroupCoordinator æ”¶åˆ°è¯·æ±‚åï¼Œä¸ºæ¶ˆè´¹è€…ç»„å†…çš„æ¶ˆè´¹è€…é€‰å‡ºä¸€ä¸ª leaderï¼Œå¹¶ä¸ºæ¶ˆè´¹è€…ç»„é€‰å®šä¸€ä¸ªåˆ†åŒºåˆ†é…ç­–ç•¥ã€‚

        ç„¶åï¼ŒGroupCoordinator è¿”å› JoinGroupResponseã€‚ä½†ï¼Œmembers å­—æ®µåªæœ‰ leader æœ‰æ•°æ®ã€‚

    3. ç¬¬ä¸‰é˜¶æ®µ( SYNC GROUP)

        æ¶ˆè´¹è€…ç»„ leader æ ¹æ® GroupCoordinator è¿”å›çš„åˆ†åŒºç­–ç•¥å®Œæˆå…·ä½“çš„åˆ†åŒºåˆ†é…åï¼Œå‘ GroupCoordinator å‘é€ SyncGroupRequest è¯·æ±‚ã€‚æ‰€æœ‰æ¶ˆè´¹è€…éƒ½ä¼šå‘é€è¯¥è¯·æ±‚ï¼ŒGroupCoordinator å°†æ¶ˆè´¹è€…ç»„ leader å‘é€æ¥çš„åˆ†é…æ–¹æ¡ˆå’Œæ¶ˆè´¹è€…ç»„çš„å…ƒæ•°æ®ä¸€èµ·å­˜å…¥ _consumer_offsets ä¸»é¢˜ä¸­ï¼Œç„¶åå°†å“åº”å‘é€ç»™å„ä¸ªæ¶ˆè´¹è€…ã€‚

        å½“æ¶ˆè´¹è€…æ”¶åˆ°æ‰€å±çš„åˆ†é…æ–¹æ¡ˆä¹‹åä¼šè°ƒç”¨ PartitionAssignor ä¸­çš„ `onAssignment()`æ–¹æ³•ã€‚éšåå†è°ƒç”¨ ConsumerRebalanceListener ä¸­çš„ `OnPartitionAssigned()` æ–¹æ³•ã€‚ä¹‹åå¼€å¯å¿ƒè·³ä»»åŠ¡ï¼Œæ¶ˆè´¹è€…å®šæœŸå‘æœåŠ¡ç«¯çš„ GroupCoordinator å‘é€ HeartbeatRequest æ¥ç¡®å®šå½¼æ­¤åœ¨çº¿ã€‚

    4. ç¬¬å››é˜¶æ®µ( HEARTBEAT)

        æ­£å¼å¼€å§‹æ¶ˆè´¹å‰ï¼Œæ¶ˆè´¹è€…é€šè¿‡ OffsetFetchRequest è¯·æ±‚è·å–ä¸Šæ¬¡æäº¤çš„æ¶ˆè´¹ä½ç§»å¹¶ä»æ­¤å¤„ç»§ç»­æ¶ˆè´¹ã€‚æ¶ˆè´¹è€…é€šè¿‡å‘ GroupCoordinator å‘é€å¿ƒè·³æ¥ç»´æŒå®ƒä»¬ä¸æ¶ˆè´¹ç»„çš„ä»å±å…³ç³»ï¼Œä»¥åŠå®ƒä»¬å¯¹åˆ†åŒºçš„æ‰€æœ‰æƒå…³ç³»ã€‚

## Zookeeper

- [zookeeper å¦‚ä½•ä¿è¯äº‹åŠ¡æŒ‰é¡ºåºç”Ÿæ•ˆï¼Ÿ](https://time.geekbang.org/column/article/239261)

- [zookeeper é€‰ä¸¾è¿‡ç¨‹ä¿è¯ä¸€è‡´æ€§](https://www.jianshu.com/p/f30ae8e75d6d) 
  
    > å…³äº zookeeper çš„[é—®é¢˜ä¸€](https://segmentfault.com/q/1010000023814986)ã€[é—®é¢˜äºŒ](https://www.zhihu.com/question/324291664)?

    å½“å®¢æˆ·ç«¯è¿æ¥çš„èŠ‚ç‚¹å´©æºƒåï¼Œ[å®¢æˆ·ç«¯è¶…æ—¶ä¼šè¿›è¡Œé‡è¿](http://www.caotama.com/29507.html)ï¼Œä¸ä¼šå‡ºç°äº‹åŠ¡è¿”å›å¤±è´¥ï¼Œä½†æœ€ç»ˆåˆæˆåŠŸçš„æƒ…å†µã€‚

- [zookeeper ä¸ç¨³å®šè§£å†³æ–¹æ¡ˆ](https://zhuanlan.zhihu.com/p/25594630)

- [zookeeper åˆ†åŒºåçš„è¡Œä¸º](https://cwiki.apache.org/confluence/display/ZOOKEEPER/FailureScenarios)

- [zxid æº¢å‡ºå¤„ç†](https://segmentfault.com/q/1010000022201186)

- [Zookeeper å´©æºƒé€‰ä¸¾ä¹‹åçš„æ•°æ®åŒæ­¥è¿‡ç¨‹](https://blog.csdn.net/qq_41775852/article/details/104947943)

- [zookeeper sessionMovedException å¤„ç†è¿‡ç¨‹](https://blog.csdn.net/trntaken/article/details/108808165)

- [fast leader election](https://mp.weixin.qq.com/s/bS_Se3UnEVGKJgILLhhiTA)['](https://yq.aliyun.com/articles/298075)

    zab åè®®å››ä¸ªé˜¶æ®µ â€”â€” é€‰ä¸¾ï¼Œå‘ç°ï¼ŒåŒæ­¥ï¼Œå¹¿æ’­ã€‚
    
    fle ä¸‰ä¸ªé˜¶æ®µ â€”â€” é€‰ä¸¾ï¼Œæ¢å¤ï¼Œå¹¿æ’­ã€‚

### zab åŸç†è§£æ

1. zookeeper å´©æºƒåï¼ŒåŠ è½½ç£ç›˜ä¸­çš„å¿«ç…§å’Œäº‹åŠ¡æ—¥å¿—ï¼Œä½†äº‹åŠ¡æ—¥å¿—ä¸­åŒ…å«å·²ç»commitå’Œæœªcommitçš„proposalï¼Œè¿™æ ·å²‚ä¸æ˜¯åº”ç”¨äº†æœªç»è¿‡ä»²è£çš„proposalï¼Ÿ

- [å®˜ç½‘æ–‡æ¡£ ZooKeeper Internals](https://zookeeper.apache.org/doc/r3.3.5/zookeeperInternals.html)

    > any uncommited proposals from a previous epoch seen by a new leader will be committed by that leader before it becomes active.

    æ–°å½“é€‰ leader ä¼šæäº¤ä¸Šä¸€ä»»çš„æœªæäº¤ proposalã€‚å¦‚æœææ¡ˆp1è¢«å‘å‡ºåï¼Œæœªè¢«æäº¤ï¼Œleader å´©æºƒï¼Œé‡æ–°å¼€å§‹é€‰ä¸¾ï¼Œæ–°çš„ leader å¦‚æœå› ä¸ºå´©æºƒç­‰åŸå› ï¼Œæ²¡æœ‰P1ï¼Œåˆ™ P1 ææ¡ˆè¢«è¿”å›å¤±è´¥ã€‚å¦‚æœæ–°çš„leaderæœ‰P1ï¼Œåˆ™P1æˆåŠŸã€‚

    > ZooKeeper messaging consists of two phasesï¼šLeader Activation and Active messagingã€‚

    é€‰ä¸¾åï¼Œleaderè¦å¼€å§‹æ¶ˆæ¯å¹¿æ’­ï¼Œéœ€è¦ä¸¤ä¸ªæ­¥éª¤ã€‚ç¬¬ä¸€ï¼Œleader æ¿€æ´»ã€‚leader å½“é€‰éœ€è¦ä¸¤ä¸ªæ¡ä»¶ï¼Œæ‹¥æœ‰æœ€å¤§ zxid åŒæ—¶è¢«æ³•å®šä»»åŠ¡çš„æœåŠ¡å™¨æ‰¿è¯ºè·Ÿéšã€‚ç¬¬ä¸€ç‚¹æ˜¯ç¡¬æ€§æ¡ä»¶ï¼Œä½†ç¬¬äºŒç‚¹åªè¦æœ‰æé«˜çš„æŠŠæ¡å³å¯ï¼Œæˆä¸ºå‡† leader åï¼Œleader activation ä¼šå¯¹è¯¥leaderè¿›è¡ŒäºŒæ¬¡æ£€æŸ¥ã€‚

## Tomcat

- [Tomcat æ¶æ„è§£æ](https://mp.weixin.qq.com/s/fU5Jj9tQvNTjRiT9grm6RA)

- [Tomcat å¤„ç†è¯·æ±‚è¿‡ç¨‹æºç è§£æ](https://blog.csdn.net/leileibest_437147623/article/details/85287568?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase)

## Netty

> Reactor æ¨¡å¼
> 
> Reactoræ¨¡å¼æ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ï¼Œç”¨äºä¸€ç§å¤„ç†ä¸€ä¸ªæˆ–å¤šä¸ªå®¢æˆ·ç«¯å¹¶å‘è¿›è¡ŒæœåŠ¡è¯·æ±‚çš„è®¾è®¡æ¨¡å¼ã€‚
> 
> å®ƒå°†æœåŠ¡ç«¯æ¥æ”¶è¯·æ±‚ä¸äº‹ä»¶å¤„ç†åˆ†ç¦»ï¼Œæé«˜äº†ç³»ç»Ÿå¤„ç†å¹¶å‘çš„èƒ½åŠ›ï¼Œ`java NIO çš„ reactor æ¨¡å¼æ˜¯åŸºäºç³»ç»Ÿå†…æ ¸çš„å¤šè·¯å¤ç”¨æŠ€æœ¯å®ç°çš„`ã€‚

- [SocketChannel ä¸ ServerSocketChannel åŒºåˆ«](https://blog.csdn.net/hzmlg1988/article/details/88082492)

- [Netty å¯åŠ¨æºç åˆ†æ](https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&album_id=1342147420482011137&__biz=MzI2NzY4MjM1OQ==#wechat_redirect)(çŒ¿ç¯å¡”|éœ€å¾®ä¿¡ä¸­æ‰“å¼€)

- [netty æ—¶é—´è½®è®¾è®¡](https://zacard.net/2016/12/02/netty-hashedwheeltimer/)

- [JDK Epoll ç©ºè½®è¯¢ bug](https://www.jianshu.com/p/3ec120ca46b2)

### å†…å­˜ç®¡ç†

- [Netty å†…å­˜ç®¡ç†æ¨¡å‹](https://zhuanlan.zhihu.com/p/259819465)

    å†…å­˜å¯¹è±¡æ± åŒ–çš„ä¸»è¦ç›®çš„æ˜¯æé«˜å†…å­˜çš„ä½¿ç”¨ç‡ã€‚
    
    æ± åŒ–çš„ç®€å•å®ç°æ€è·¯ï¼Œæ˜¯åœ¨ JVM å †å†…å­˜ä¸Šæ„å»ºä¸€å±‚å†…å­˜æ± ï¼Œé€šè¿‡ allocate æ–¹æ³•è·å–å†…å­˜æ± ä¸­çš„ç©ºé—´ï¼Œé€šè¿‡ release æ–¹æ³•å°†ç©ºé—´å½’è¿˜ç»™å†…å­˜æ± ã€‚
    
    å¯¹è±¡çš„ç”Ÿæˆå’Œé”€æ¯ï¼Œä¼šå¤§é‡åœ°è°ƒç”¨ allocate å’Œ release æ–¹æ³•ï¼Œå› æ­¤å†…å­˜æ± é¢ä¸´ç¢ç‰‡ç©ºé—´å›æ”¶çš„é—®é¢˜ï¼Œåœ¨é¢‘ç¹ç”³è¯·å’Œé‡Šæ”¾ç©ºé—´åï¼Œå†…å­˜æ± éœ€è¦ä¿è¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œç”¨äºå¯¹è±¡çš„åˆ†é…ã€‚
    
    åŸºäºè¿™ä¸ªéœ€æ±‚ï¼Œæœ‰ä¸¤ç§ç®—æ³•ç”¨äºä¼˜åŒ–è¿™ä¸€å—çš„å†…å­˜åˆ†é…ï¼šä¼™ä¼´ç³»ç»Ÿå’Œ slab ç³»ç»Ÿã€‚
    
    - ä¼™ä¼´ç³»ç»Ÿï¼Œç”¨å®Œå…¨äºŒå‰æ ‘ç®¡ç†å†…å­˜åŒºåŸŸï¼Œå·¦å³èŠ‚ç‚¹äº’ä¸ºä¼™ä¼´ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªå†…å­˜å—ã€‚å†…å­˜åˆ†é…å°†å¤§å—å†…å­˜ä¸æ–­äºŒåˆ†ï¼Œç›´åˆ°æ‰¾åˆ°æ»¡è¶³æ‰€éœ€çš„æœ€å°å†…å­˜åˆ†ç‰‡ã€‚å†…å­˜é‡Šæ”¾ä¼šåˆ¤æ–­é‡Šæ”¾å†…å­˜åˆ†ç‰‡çš„ä¼™ä¼´ï¼ˆå·¦å³èŠ‚ç‚¹ï¼‰æ˜¯å¦ç©ºé—²ï¼Œå¦‚æœç©ºé—²åˆ™å°†å·¦å³èŠ‚ç‚¹åˆæˆæ›´å¤§å—å†…å­˜ã€‚ä¾‹å¦‚ï¼šChunkList çš„å†…å­˜ç®¡ç†ã€‚

    - slab ç³»ç»Ÿï¼Œä¸»è¦è§£å†³å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œå°†å¤§å—å†…å­˜æŒ‰ç…§ä¸€å®šå†…å­˜å¤§å°è¿›è¡Œç­‰åˆ†ï¼Œå½¢æˆç›¸ç­‰å¤§å°çš„å†…å­˜ç‰‡æ„æˆçš„å†…å­˜é›†ã€‚æŒ‰ç…§å†…å­˜ç”³è¯·ç©ºé—´çš„å¤§å°ï¼Œç”³è¯·å°½é‡å°å—å†…å­˜æˆ–è€…å…¶æ•´æ•°å€çš„å†…å­˜ï¼Œé‡Šæ”¾å†…å­˜æ—¶ï¼Œä¹Ÿæ˜¯å°†å†…å­˜åˆ†ç‰‡å½’è¿˜ç»™å†…å­˜é›†ã€‚ä¾‹å¦‚ï¼šTinySubPage å’Œ SmallSubPageã€‚

- [Nettyå¯¹é›¶æ‹·è´ä¸‰ä¸ªå±‚æ¬¡çš„å®ç°](https://zhuanlan.zhihu.com/p/88599349)

### åº•å±‚åŸç†

- [Java NIO wakeupå®ç°åŸç†](https://my.oschina.net/7001/blog/1509533)

    Selectorçš„select()æ–¹æ³•æ—¶ï¼Œä¼šé˜»å¡ã€‚

    pollWrapper(ä¸åŒ Selector å®ç°ï¼Œè¯¥ç»“æ„ä¸ä¸€æ ·) è´Ÿè´£ä¿å­˜å½“å‰ selector å¯¹è±¡ä¸Šæ³¨å†Œçš„ FDï¼Œå½“è°ƒç”¨ Selector çš„ select() æ–¹æ³•æ—¶ï¼Œä¼šå°†pollWrapperçš„å†…å­˜åœ°å€ä¼ é€’ç»™å†…æ ¸ï¼Œç”±å†…æ ¸è´Ÿè´£è½®è®­pollWrapperä¸­çš„FDï¼Œä¸€æ—¦æœ‰äº‹ä»¶å°±ç»ªï¼Œå°†äº‹ä»¶å°±ç»ªçš„FDä¼ é€’å›ç”¨æˆ·ç©ºé—´ï¼Œé˜»å¡åœ¨select()çš„çº¿ç¨‹å°±ä¼šè¢«å”¤é†’ã€‚

    ä»¥ WindowsSelectorImpl ä¸ºä¾‹ï¼Œå®ƒåœ¨å®ä¾‹åŒ–æ—¶é¡ºä¾¿å®ä¾‹åŒ–äº†ä¸€ä¸ªç®¡é“å®ä¾‹ wakeupPipeï¼Œè¿™ä¸ªç®¡é“åŒ…å«ä¸¤ä¸ª wakeupSourceFd å’ŒwakeupSinkFd ä¸¤ä¸ª[æ–‡ä»¶æè¿°ç¬¦](https://www.yuque.com/myboy-ipf95/kgi7au/kh8vee)(è¿›ç¨‹å¯ä»¥é€šè¿‡æ–‡ä»¶æè¿°ç¬¦è¡¨å®šä½è‡ªå·±å·²æ‰“å¼€çš„å„ç±»è¾“å…¥è¾“å‡ºæµ)ã€‚ç³»ç»Ÿå°† wakeupSourceFd ä½œä¸ºç¬¬ä¸€ä¸ª FD åŠ åˆ° pollWrapper ä¸­è®©ç³»ç»Ÿè¿›è¡Œç›‘æ§ï¼ŒSelector éœ€è¦ wakeup() çš„æ—¶å€™ï¼Œå°±å¾€ wakeupSinkFd å†™å…¥ä¸€å­—èŠ‚çš„æ•°æ®ï¼Œå®ƒç«‹å³è¢«å‘é€åˆ° wakeupPiepe çš„ source ç«¯ï¼ŒwakeupSourceFd æœ‰äº†æ•°æ®ï¼ŒSelector ä¾¿ç«‹å³è¿”å›äº†ã€‚

- [EpollSelectorImpl å®ç°åŸç†](https://zhuanlan.zhihu.com/p/159346800)

- [NioEventLoop æºç è§£æ](https://blog.csdn.net/TheLudlows/article/details/82961193)

- [inBound ä¸ outBound å¤„ç†å™¨](https://blog.csdn.net/weixin_41947378/article/details/108059942)['](https://zhuanlan.zhihu.com/p/104232421)

    ChannelHandler çš„æ–¹æ³•æä¾›å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼ŒChannelHandlerContext è´Ÿè´£è°ƒç”¨é“¾çš„è¿›è¡Œã€‚ChannelHandlerAdaptor ç»§æ‰¿äº† ChannelHandlerï¼Œå…¶æ–¹æ³•çš„é»˜è®¤å®ç°ä¸º ç›´æ¥è°ƒç”¨ ChannelHandlerContext çš„æ–¹æ³•ã€‚

    å…¥ç«™äº‹ä»¶ç”±è¿œç«¯æ•°æ®è§¦å‘ï¼Œå‡ºç«™äº‹ä»¶ç”±ç”¨æˆ·ä»£ç è§¦å‘ã€‚

- [ctx.channel().writeAndFlush()å’Œctx.writeAndFlush()çš„åŒºåˆ«](https://blog.csdn.net/chehec2010/article/details/90643436)['](https://blog.csdn.net/qq_34827263/article/details/100729528)['](https://www.cnblogs.com/qdhxhz/p/10234908.html)

- [AbstractNioByteChannel æºç åˆ†æ](https://www.jianshu.com/p/d82fc1c52805)['](https://www.cnblogs.com/brandonli/p/10210592.html)

    å¯¹äº AbstractNioByteChannel å’Œ AbstractNioMessageChannelï¼Œè¿™ä¸¤ä¸ªç±»ä¸»è¦å®ç°readå’Œwriteçš„æ¡†æ¶ï¼Œå®ƒä»¬çš„å®ç°å¤§è‡´ç›¸åŒAbstractNioByteChannelè¯»å†™çš„æ˜¯byte arrayï¼Œè€ŒAbstractNioMessageChannelè¯»çš„æ—¶å€™ä¼šæŠŠbyte arrayè½¬æ¢æˆç»“æ„åŒ–çš„å¯¹è±¡ï¼Œå†™çš„æ—¶å€™æŠŠç»“æ„åŒ–å¯¹è±¡åºåˆ—åŒ–æˆbyte arrayã€‚
    
    AbstractNioByteChannelå®šä¹‰äº†3ä¸ªæŠ½è±¡æ–¹æ³•ç”¨æ¥å®ç°çœŸæ­£çš„è¯»å†™æ“ä½œ: doReadBytes, doWriteBytes, doWriteFileRegionã€‚
    
    AbstractNioMessageChannelç¬¬äº†ä¸¤ä¸ª2ä¸ªæŠ½è±¡æ–¹æ³•ç”¨æ¥å®ç°çœŸæ­£çš„ç»“æ„åŒ–æ•°æ®ç±»å‹çš„è¯»å†™: doReadMessages, doWriteMessageã€‚

- [Netty æœåŠ¡ç«¯è¿è¡Œæ—¶]

    NioServerSocketChannel åˆå§‹åŒ–æ—¶è®¾ç½®è‡ªå·±çš„ pipelineï¼Œä¼šå°† ServerBootstrapAcceptor ç½®äºå€’æ•°ç¬¬äºŒçš„ä½ç½®ï¼Œä¹‹ååœ¨ bossGroup ä¸­é€‰æ‹©ä¸€ä¸ª NioEventLoop å®Œæˆ register ï¼Œç„¶åå¼€å§‹ç›‘å¬ã€‚

    æ¯ä¸ª NioEventLoop å¯¹è±¡åœ¨ NioEventLoopGroup å®ä¾‹åŒ–æ—¶è¢«åˆ›å»ºï¼Œåˆ›å»ºæ—¶ï¼ŒopenSelector() ä¼šä¸ºæ¯ä¸ª NioEventLoop åˆ›å»º selectorã€‚

    å½“ NioServerSocketChannel å¯¹åº”çš„ NioEventLoop æ¥æ”¶åˆ° SelectionKey.OP_READ æˆ– SelectionKey.OP_ACCEPT ä¿¡å·æ—¶ï¼ŒNioMessageUnsafe çš„ read() æ–¹æ³•ä¸­ï¼ŒdoReadMessages ä¼šç”Ÿæˆè¯¥é“¾æ¥å¯¹åº”çš„ NioSocketChannelï¼Œä¹‹åè§¦å‘ pipelineï¼Œæ‰§è¡Œåˆ° ServerBootstrapAcceptor æ—¶ï¼Œå®ƒä¼šä¸ºæ–°ç”Ÿæˆçš„ NioSocketChannel å¯¹åº”çš„ pipeline è®¾ç½® childHandlerï¼ˆä¹Ÿå°±æ˜¯ ChannelInitializerï¼‰ï¼ŒåŒæ—¶å°†è¯¥ NioSocketChannel register åˆ° workerGroup çš„ä¸€ä¸ª NioEventLoop å¯¹è±¡ä¸­ï¼Œç„¶åè¯¥ NioEventLoop è¿è¡Œæ—¶å°†ç›‘å¬è¯¥ Channelã€‚

- å¼‚æ­¥ä¸²è¡Œæ— é”åŒ–

    1. å¯¹äºå¤–éƒ¨çº¿ç¨‹æäº¤ç»™ IO çº¿ç¨‹çš„ä»»åŠ¡ï¼Œä»¥åŠ Handler ä¸­ä¸šåŠ¡ä»»åŠ¡çš„å¤„ç†äº¤ç»™ä¸šåŠ¡çº¿ç¨‹æ± ï¼Œéƒ½éœ€è¦é€šè¿‡ inEventLoop() æ–¹æ³•è¿›è¡Œåˆ¤æ–­ï¼Œå‡å°‘äº†ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚
    2. MPSC é˜Ÿåˆ—æ— é”é˜Ÿåˆ—æé«˜æ€§èƒ½ã€‚

# Linux

- Linux IO æ¨¡å‹
  - [ç®€è¿° Linux IO æ¨¡å‹](https://mp.weixin.qq.com/s/3C7Iv1jof8jitOPL_4c_bQ)
  - [è¯¦è¿° Linux IO æ¨¡å‹](https://www.jianshu.com/p/486b0965c296)

- [å¤šè·¯å¤ç”¨ä¹‹selectã€pollã€epoll](https://www.wemeng.top/2019/08/22/%E8%81%8A%E8%81%8AIO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E4%B9%8Bselect%E3%80%81poll%E3%80%81epoll%E8%AF%A6%E8%A7%A3/)['](https://wenchao.ren/2019/07/Select%E3%80%81Epoll%E3%80%81KQueue%E5%8C%BA%E5%88%AB/)

- [Linux é›¶æ‹·è´æŠ€æœ¯](https://mp.weixin.qq.com/s/0SHaQBgMJ4MlKjX6m08EpQ)

  Linux I/O è®¾å¤‡ä¸ä¸»å­˜ä¿¡æ¯ä¼ é€çš„æ§åˆ¶æ–¹å¼åˆ†ä¸ºç¨‹åºè½®è¯¢ã€ä¸­æ–­ã€DMAç­‰ã€‚

  åœ¨ Linux ä¸­é›¶æ‹·è´æŠ€æœ¯ä¸»è¦æœ‰ 3 ä¸ªå®ç°æ€è·¯:

    1. ç”¨æˆ·æ€ç›´æ¥ I/O
    2. å‡å°‘æ•°æ®æ‹·è´æ¬¡æ•°
    3. å†™æ—¶å¤åˆ¶æŠ€æœ¯

  ä»¥è¯»å–ç£ç›˜æ•°æ®ï¼Œå†™å…¥ç½‘å¡ä¸ºä¾‹ï¼Œå®ç°æ–¹å¼ï¼š

    1. ç”¨æˆ·æ€ç›´æ¥ I/O
      
        å†…æ ¸ä»…è¿›è¡Œå¿…è¦çš„é…ç½®ï¼Œè™½ç„¶è¿˜æœ‰ç”¨æˆ·å†…æ ¸ç©ºé—´ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ï¼Œä½†å‡å°‘äº† CPU æ‹·è´

    2. mmap() + write
      
        å°†ç”¨æˆ·ç¼“å†²åŒºçš„éƒ¨åˆ†åŒºåŸŸæ˜ å°„åˆ°å†…æ ¸ç¼“å†²åŒºï¼Œå‡å°‘äº†ä¸€æ¬¡å†…æ ¸å‘ç”¨æˆ·ç¼“å†²çš„ CPU æ‹·è´

    3. sendfile

        sendfile å‘½ä»¤ä¹‹å‰ï¼Œè¯»å–å†™å…¥é€šè¿‡ read() å’Œ write() å‘½ä»¤ï¼Œå­˜åœ¨å››æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ä»¥åŠå‘ç”¨æˆ·ç©ºé—´çš„å†—ä½™æ‹·è´ã€‚

        Sendfile è°ƒç”¨ä¸­ I/O æ•°æ®å¯¹ç”¨æˆ·ç©ºé—´æ˜¯å®Œå…¨ä¸å¯è§çš„ï¼Œå®Œå…¨äº¤ç”±å†…æ ¸å»è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚ä¸è¿‡ï¼Œé—®é¢˜æ˜¯ï¼Œè¿‡ç¨‹ä¸­ç”¨æˆ·æ— æ³•å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹äº†ã€‚

    4. Sendfile + DMA gather copy

        ç£ç›˜è¯»å…¥åˆ°å†…æ ¸ç¼“å†²åŒºçš„æ•°æ®ï¼Œæœ¬æ¥éœ€è¦ä¼ è¾“åˆ° Socket ç¼“å†²åŒºï¼Œç„¶åæ‰é€šè¿‡ DMA æ‹·è´åˆ°ç½‘å¡ä¸­ã€‚

        å¦‚ä»Šï¼Œåœ¨ç¡¬ä»¶çš„æ”¯æŒä¸‹ï¼ŒSendfile æ‹·è´æ–¹å¼ä»…ä»…æ˜¯å°†æ•°æ®çš„æè¿°ä¿¡æ¯ï¼Œå³ï¼Œç¼“å†²åŒºæ–‡ä»¶æè¿°ç¬¦å’Œæ•°æ®é•¿åº¦çš„æ‹·è´ï¼Œæ‹·è´åˆ° Socket ç¼“å†²åŒºä¸­ã€‚

        å‘å¾€ç½‘å¡æ—¶ï¼Œç›´æ¥ä»å†…æ ¸ç¼“å†²åŒºä¸­å–ã€‚åˆå‡å°‘äº†ä¸€æ¬¡ CPU æ‹·è´ã€‚

    5. Splice

        Sendfile åªé€‚ç”¨äºå°†æ•°æ®ä»æ–‡ä»¶æ‹·è´åˆ° socket å¥—æ¥å­—ä¸Šï¼Œè€Œ Splice ç³»ç»Ÿè°ƒç”¨ï¼Œä¸ä»…ä¸éœ€è¦ç¡¬ä»¶æ”¯æŒï¼Œè¿˜å®ç°äº†ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¹‹é—´çš„æ•°æ®é›¶æ‹·è´ã€‚

    6. å†™æ—¶å¤åˆ¶

        å†…æ ¸ç¼“å†²åŒºè¢«å¤šä¸ªè¿›ç¨‹å…±äº«æ—¶ï¼Œé™ä½äº†ç³»ç»Ÿå¼€é”€ã€‚

    7. ç¼“å†²åŒºå…±äº«

        é€šè¿‡ç¼“å†²åŒºæ± ï¼Œå®ƒèƒ½è¢«åŒæ—¶æ˜ å°„åˆ°ç”¨æˆ·ç©ºé—´ï¼ˆuser spaceï¼‰å’Œå†…æ ¸æ€ï¼ˆkernel spaceï¼‰ï¼Œå®Œå…¨çœå»äº†æ‹·è´ã€‚

- [Linuxä¸­çš„æ–‡ä»¶æè¿°ç¬¦ä¸æ‰“å¼€æ–‡ä»¶ä¹‹é—´çš„å…³ç³»](https://blog.csdn.net/cywosp/article/details/38965239)

- [Linux Pipeline åŸç†](https://blog.csdn.net/oguro/article/details/53841949)

    åŒ¿åç®¡é“ï¼Œå†…æ ¸ä¸­ä¸€å°å—ç¼“å†²åŒºåŸŸã€‚å‘½åç®¡é“ï¼Œä¼šåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å»ºç«‹ï¼Œå¯ä»¥ç”¨äºä»»æ„è¿›ç¨‹ä¹‹é—´é€šä¿¡ã€‚

- [KeepAlived åŸç†](https://blog.csdn.net/qq_24336773/article/details/82143367)

# è®¡ç®—æœºç½‘ç»œ

- ä¸ºä»€ä¹ˆç½‘ç»œåŒæ—¶éœ€è¦ IP å’Œ MAC åœ°å€ï¼Ÿ

    - [å†å²åŸå› ](https://www.zhihu.com/question/21546408/answer/53576595)ï¼ŒTCP/IPï¼ˆå› ç‰¹ç½‘ï¼‰ å®Œæˆäº†å¯¹å¼‚æ„ç½‘ç»œé—´çš„äº’è”äº’é€šï¼Œä½†æ²¡æœ‰å®šä¹‰ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚çš„å…·ä½“ç»†èŠ‚ï¼Œå…¶éœ€è¦è¿è¡Œäºä»¥å¤ªç½‘ç­‰å…¶å®ƒäºŒå±‚ç½‘ç»œä¹‹ä¸Šã€‚

    - [åŠŸèƒ½åŸå› ](https://www.zhihu.com/question/21546408/answer/149670503)ï¼ŒIP åœ°å€ä¸åœ°åŸŸç›¸å…³ï¼Œå®ƒè™½ç„¶å…·æœ‰å”¯ä¸€æ ‡è¯†ä½œç”¨ï¼Œä½†ä¸èƒ½å”¯ä¸€æ ‡è¯†æŸå°ä¸»æœºï¼ŒMAC åœ°å€æ‰èƒ½å”¯ä¸€æ ‡è¯†æŸå°ä¸»æœºã€‚å¦‚æœä»…æœ‰ IP åœ°å€ï¼Œä¸»æœº A IP æ¢äº†ä»¥åï¼Œå‘å¾€ä¸»æœº A çš„æ¶ˆæ¯ä¸ä¼šå‘å¾€ A åŸæ¥çš„ IPï¼Œè€Œæ˜¯ä¼šå‘é€åˆ° A çš„ MAC åœ°å€æ–°å¯¹åº”çš„ IP åœ°å€ã€‚æ‰€ä»¥ï¼ŒIP ç”¨äºè·¯ç”±ï¼Œä½†æ— æ³•æ°¸ä¹…å”¯ä¸€æ ‡è¯†ã€‚

## HTTP

- [http ç‰ˆæœ¬ç‰¹æ€§](http://muyiy.cn/question/network/117.html)

    http1.0: æ— çŠ¶æ€ï¼Œæ— è¿æ¥
    http1.1: é•¿è¿æ¥ï¼Œç®¡é“åŒ–è¯·æ±‚ï¼Œç¼“å­˜æ§åˆ¶
    http2.0: å¤šè·¯å¤ç”¨ï¼Œå¤´éƒ¨å‹ç¼©ï¼Œserver pushï¼ŒäºŒè¿›åˆ¶åˆ†å¸§

- [å½“æˆ‘ä»¬åœ¨è°ˆè®ºHTTPé˜Ÿå¤´é˜»å¡æ—¶ï¼Œæˆ‘ä»¬åœ¨è°ˆè®ºä»€ä¹ˆ](https://blog.csdn.net/uxiad7442kmy1x86dtm3/article/details/79416171)['](https://blog.csdn.net/m0_37145844/article/details/109280985?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~all~sobaiduend~default-1-109280985.nonecase&utm_term=tcp%E9%98%9F%E5%A4%B4%E9%98%BB%E5%A1%9E&spm=1000.2123.3001.4430)

   HTTP/2 over TCP è§£å†³äº† http request çº§åˆ«çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œä½†åº”ç”¨å±‚åè®®æ— æ³•è§£å†³ TCP ä¼ è¾“å±‚çš„å¯¹å¤´é˜»å¡é—®é¢˜ã€‚

- [TCP/IP, SPDY, WebSocket ä¸‰è€…ä¹‹é—´çš„å…³ç³»](https://www.zhihu.com/question/20097129/answer/15017791)

## SOCKET

- [Socket ç«¯å£å¤ç”¨](https://bbs.csdn.net/topics/390945826)

    ä¸€èˆ¬ TCP çš„ SO_REUSEADDR ç”¨äºæœåŠ¡å™¨ï¼Œä»¥ä¾¿æœåŠ¡å™¨å´©æºƒé‡å¯æ—¶ï¼Œå¯ç›´æ¥ Bind å¤„äº TIME_WAIT çŠ¶æ€çš„ç«¯å£ã€‚

    å¯¹äº TCPï¼Œæˆ‘ä»¬ä¸å¯èƒ½å¯åŠ¨æ†ç»‘ç›¸åŒ IP åœ°å€å’Œç›¸åŒç«¯å£å·çš„å¤šä¸ªæœåŠ¡å™¨ã€‚

    ç«¯å£å¤ç”¨æ—¶ï¼Œåªæœ‰ä¸€ä¸ªSocketå¯ä»¥å¾—åˆ°æ•°æ®ã€‚

- [å¤šä¸ª Socket ç›‘å¬åŒä¸€ç«¯å£](https://blog.51cto.com/ticktick/779866)['](https://stackoverflow.com/questions/3329641/how-do-multiple-clients-connect-simultaneously-to-one-port-say-80-on-a-server)['](https://blog.csdn.net/u011580175/article/details/80306414)

    ä¸€ä¸ªè¿›ç¨‹å¯ä»¥ä¸å¤šä¸ªå¥—æ¥å­—å…³è”ï¼Œä¸¤ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ä¸å¯ä»¥ä¾¦å¬åŒä¸€ç«¯å£ã€‚
    
    æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨å¤šä¸ªå­è¿›ç¨‹/çº¿ç¨‹ä¸ºæ¯ä¸ªå¥—æ¥å­—æä¾›æœåŠ¡ã€‚æ“ä½œç³»ç»Ÿï¼ˆç‰¹åˆ«æ˜¯UNIXï¼‰åœ¨è®¾è®¡ä¸Šå…è®¸å­è¿›ç¨‹ä»çˆ¶è¿›ç¨‹ç»§æ‰¿æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ï¼ˆFDï¼‰ã€‚å› æ­¤ï¼Œåªè¦è¿›ç¨‹é€šè¿‡çˆ¶å­å…³ç³»ä¸Aç›¸å…³è”ï¼Œä¾¿å¯ä»¥ç”±æ›´å¤šè¿›ç¨‹A1ï¼ŒA2..ç›‘å¬è¿›ç¨‹Aä¾¦å¬çš„æ‰€æœ‰å¥—æ¥å­—ã€‚
    
## TCP

- [TCP/IP ä¸‰æ¬¡æ¡æ‰‹æ€è€ƒ](https://blog.csdn.net/lengxiao1993/article/details/82771768?utm_medium=distribute.wap_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&depth_1-utm_source=distribute.wap_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase)

- [TCP/IP å››æ¬¡æŒ¥æ‰‹](https://blog.csdn.net/ThinkWon/article/details/104903925?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.nonecase)

- [TCP åŠè¿æ¥å’Œå…¨è¿æ¥](http://jm.taobao.org/2017/05/25/525-1/)

    Syn Queue ä¸ºåŠè¿æ¥é˜Ÿåˆ—ï¼Œç­‰å¾… server acceptï¼›Accept Queue ä¸ºå…¨è¿æ¥é˜Ÿåˆ—ï¼Œå­˜å‚¨å®Œæˆäº†ä¸‰æ¬¡æ¡æ‰‹çš„è¿æ¥ã€‚

    è°ƒç”¨å‘½ä»¤ ss -lnts å¯ä»¥æŸ¥çœ‹ Socket è¿æ¥æƒ…å†µï¼š

    - å½“è¿æ¥å¤„äºListeningçŠ¶æ€æ—¶ï¼ŒRecv-Qè¡¨ç¤ºå…¨è¿æ¥é˜Ÿåˆ—å®é™…ä½¿ç”¨æƒ…å†µï¼ŒSend-Qè¡¨ç¤ºå…¨è¿æ¥é˜Ÿæœ€å¤§å®¹é‡ã€‚
    - å½“è¿æ¥å¤„äºéListeningçŠ¶æ€æ—¶ï¼ŒRecv-Qè¡¨ç¤ºæ¥å—ç¼“å†²åŒºè¿˜æ²¡æœ‰è¯»å–çš„æ•°æ®å¤§å°ï¼ŒSend-Qè¡¨ç¤ºå‘é€ç¼“å†²åŒºè¿˜æ²¡æœ‰è¢«å¯¹ç«¯ACKçš„æ•°æ®å¤§å°ã€‚

- [TCP_NODELAYé€‰é¡¹](https://www.jianshu.com/p/ccafdeda0b95)

    TCP_NODELAY å…³é—­æ—¶ï¼Œä¼šå¼€å¯ [Nagle ç®—æ³•](https://www.cnblogs.com/postw/p/9710772.html)ã€‚

    è¯¥ç®—æ³•è¦æ±‚ä¸€ä¸ª tcp è¿æ¥ä¸Šæœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªæœªè¢«ç¡®è®¤çš„æœªå®Œæˆçš„å°åˆ†ç»„ï¼Œåœ¨è¯¥åˆ†ç»„ ack åˆ°è¾¾ä¹‹å‰ä¸èƒ½å‘é€å…¶ä»–çš„å°åˆ†ç»„ï¼Œtcp éœ€è¦æ”¶é›†è¿™äº›å°‘é‡çš„åˆ†ç»„ï¼Œå¹¶åœ¨ ack åˆ°æ¥æ—¶ä»¥ä¸€ä¸ªåˆ†ç»„çš„æ–¹å¼å‘é€å‡ºå»ã€‚å› æ­¤ä¼šæœ‰å»¶è¿Ÿã€‚

## NIO

- [IO å¤šè·¯å¤ç”¨è¦æ­é…éé˜»å¡ IO](https://www.zhihu.com/question/37271342)

    select() è¿”å›å¯è¯»æ˜¯å¯èƒ½å¯è¯»ï¼Œread() æ—¶å¯èƒ½ä¼šæ²¡æœ‰æ•°æ®ã€‚

    - [ä½¿ç”¨epollæ—¶éœ€è¦å°†socketè®¾ä¸ºéé˜»å¡å—ï¼Ÿ](https://www.zhihu.com/question/23614342/answer/61986309)
    
        ä»¥ epoll ä¸ºä¾‹ï¼Œå½“ä½¿ç”¨é˜»å¡å¼çš„ fdï¼Œæ•°æ®ä»æ— åˆ°æœ‰ä¼šé€šçŸ¥è¿›ç¨‹æ¥è¯»ï¼Œä½†è¿›ç¨‹ä¸çŸ¥é“æœ‰å¤šå°‘æ•°æ®ï¼Œå½“äºŒæ¬¡å¾ªç¯æ¥è¯»æ—¶ï¼Œè‹¥æ²¡æœ‰æ•°æ®ï¼Œåˆ™è¿›ç¨‹è¢«é˜»å¡ã€‚

# é€šä¿¡åè®®

- [é€šä¿¡åè®®ä¹‹åºåˆ—åŒ–](http://blog.chinaunix.net/uid-27105712-id-3266286.html)

- [Dubbo 3.0 å‰ç»ï¼šå¸¸ç”¨åè®®å¯¹æ¯”åŠ RPC åè®®æ–°å½¢æ€æ¢ç´¢](https://mp.weixin.qq.com/s/x0pZcsKkFhcwClJJL3X7AQ)

# è§£å†³æ–¹æ¡ˆ

## è´Ÿè½½å‡è¡¡

- [DNS è½®è¯¢è´Ÿè½½å‡è¡¡](https://mp.weixin.qq.com/s/4dzqbh2wfzbQzgFodP2_6Q)

- [lvs ä¼šæ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä¸ºä»€ä¹ˆè¯´ lvs æ²¡æœ‰æµé‡äº§ç”Ÿï¼Ÿ](https://www.zhihu.com/question/36868056/answer/151700242)

    å¯¹äº LVS ä¸‰ç§ä»£ç†æ–¹å¼ä¸­çš„ä¸¤ç§ â€”â€” IP Tunnelling å’Œ Direct Routingï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„æŠ¥æ–‡æ¯æ¬¡ä¼šç»è¿‡ lvs è½¬å‘åˆ° realserverï¼Œä½† realserver å›å¤çš„æŠ¥æ–‡ä¸ä¼šç»è¿‡lvsã€‚

- [é•¿è¿æ¥ä¸è´Ÿè½½å‡è¡¡](https://mp.weixin.qq.com/s/LKGzc6XBAWYdskVQQJFLHw)

## SSO

- OAuth 2.0 æˆæƒç ç™»å½•è¿‡ç¨‹

  1. filter æ‹¦æˆª requestï¼Œå‘æµè§ˆå™¨è¿”å›é‡å®šå‘ï¼Œæµè§ˆå™¨é‡å®šå‘åˆ° SSO æœåŠ¡å™¨ `ssoServerUrl + "/jump" + "?redirectUrl={0}&loginType={1}&needSaveSsoToken=false"`ã€‚

  2. SSO æœåŠ¡å™¨è¿”å›é‡å®šå‘åœ°å€ `getSsoServerUrl() + Constant.LOGIN_URL + "?redirectUrl=" + requestUrl + "&loginType=" + loginType`ï¼Œé‡å®šå‘åˆ° SSO ç™»å½•é¡µé¢ã€‚

  3. ç™»å½•æ—¶ï¼Œæºå¸¦å›è°ƒåœ°å€ã€‚ç™»å½•æˆåŠŸï¼Œå¾®ä¿¡æœåŠ¡å™¨å›è°ƒæ¥å£ï¼Œè¿”å› token ä¿¡æ¯ã€‚

  4. SSO æœåŠ¡å™¨è§£æå¾—åˆ° tokenï¼Œä¿å­˜ token ä¿¡æ¯ï¼Œç„¶åé‡å®šå‘åˆ°è¯·æ±‚çš„åˆå§‹åœ°å€ï¼Œå¹¶æºå¸¦ token ä¿¡æ¯ã€‚

- [å•ç‚¹ç™»å½•](https://juejin.im/entry/6844903782996770824#comment)['](https://zhuanlan.zhihu.com/p/25007591)

- [JWT çš„ä¼˜ç¼ºç‚¹](https://www.cnblogs.com/nangec/p/12687258.html)

## ç‚¹èµè¯„è®ºè®¡æ•°è®¾è®¡

- [å¾®åšè®¡æ•°å™¨çš„è®¾è®¡](https://blog.cydu.net/weidesign/2012/12/06/weibo-counter-service-design-for-velocity/)

    1. æ•°æ®å­˜å‚¨ç»“æ„ä¼˜åŒ–
    2. æ•°æ®å­˜å‚¨å‹ç¼©
    3. å†·çƒ­æ•°æ®åˆ†ç¦»
    4. æ‰¹é‡æŸ¥è¯¢
    5. æ¶ˆæ¯åº¦åˆ—å»é‡

# ç¼–ç¨‹ç´ å…»

- [æ­£åˆ™è¡¨è¾¾å¼çš„ç¯è§†](https://blog.csdn.net/lxcnn/article/details/4304754)

    > `str.replaceFirst("(?<=.{5}).+", "...")`
    >
    > ä¿ç•™ `str` çš„å‰äº”ä½å­—ç¬¦ï¼Œå…¶ä½™å­—ç¬¦ç”¨ `...` ä»£æ›¿
    
    - [æ­£åˆ™è¡¨è¾¾å¼å‚è€ƒæ–‡æ¡£](http://notes.tanchuanqi.com/tools/regex.html)

- å°† javassist åŠ¨æ€ç”Ÿæˆçš„ç±»æ‰“å°å‡ºæ¥

    `(ClassGenerator)ccp.getClassPool().get("com.alibaba.dubbo.common.bytecode.Proxy0").debugWriteFile()`

## è®¾è®¡æ¨¡å¼

- ç®€å•å·¥å‚æ¨¡å¼ã€å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼

    1. ç®€å•å·¥å‚å°è£…äº†åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œè°ƒç”¨å°±ç”Ÿäº§äº§å“ Aï¼›
    2. å·¥å‚æ–¹æ³•æ¨¡å¼å°è£…äº†å¤šä¸ªç®€å•å·¥å‚ï¼Œå¯ä»¥æ ¹æ®å…¥å‚ï¼Œç”Ÿäº§ä¸åŒçš„äº§å“ Aã€Bï¼›
    3. æŠ½è±¡å·¥å‚å°è£…äº†å·¥å‚æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®å…¥å‚ï¼Œè¿”å›ä¸åŒçš„å·¥å‚ã€‚

## å¸¸ç”¨æŒ‡ä»¤

### ç½‘ç»œç›¸å…³

 - [netstat](https://www.cnblogs.com/faberbeta/p/12981880.html)

    æŸ¥çœ‹ pid ä¸ port çš„å…³ç³»

# å·¥å…·åŒ…

- [åŸç è¡¥ç å·¥å…·](http://www.atoolbox.net/Tool.php?Id=952)

- [çº¢é»‘æ ‘å·¥å…·](https://rbtree.phpisfuture.com/)

- [Raft æ¼”ç¤ºå·¥å…·](https://raft.github.io/)